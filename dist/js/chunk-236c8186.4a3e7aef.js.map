{"version":3,"sources":["webpack:///./src/assets/imgs/pdf-icon.png","webpack:///./node_modules/vuetify/lib/components/VForm/VForm.js","webpack:///./src/views/books/index.vue?c71a","webpack:///src/views/books/index.vue","webpack:///./src/views/books/index.vue?a1a4","webpack:///./src/views/books/index.vue"],"names":["module","exports","extend","name","inheritAttrs","props","lazyValidation","Boolean","value","data","inputs","watchers","errorBag","watch","val","errors","Object","values","includes","this","$emit","deep","immediate","methods","input","watcher","$watch","$set","_uid","valid","shouldValidate","hasOwnProperty","filter","validate","length","forEach","reset","resetErrorBag","setTimeout","resetValidation","push","watchInput","found","find","i","unwatch","$delete","h","staticClass","attrs","novalidate","attrs$","on","submit","e","$slots","default","render","_vm","_h","$createElement","_c","_self","_v","_s","$t","handleOpenDialog","ref","headers","scopedSlots","_u","key","fn","item","index","main_image","path","$event","showImagePreview","book","short_description","_f","handleEdit","handleDelete","onDialogClose","dialogTitle","proxy","$v","form","preventDefault","handleSubmit","fireLocaleChange","_e","listeners","_g","_b","model","callback","$$v","expression","resetToggle","Number","id","imageSize","uploadPhoto","ImageUpdated","pdfSize","FileUpdated","UploadFile","btnLoading","$invalid","photoAndFilesExist","imageOverlay","currentPreviewImage","staticRenderFns","components","GenericDialog","uploadFilePdf","isEdit","book_file","locale","get","bookIndex","computed","$refs","table_ref","handleGetItems","handleShowData","slug","formData","FormData","keys","map","formKey","append","editBook","createBook","reqData","res","reqName","console","log","items","error","dialog_ref","toggleDialog","handleUpdateItems","file","$reset","image","validations","required","minLength","maxLength","component","VAvatar","VBtn","VCol","VForm","VIcon","VImg","VRow","VSpacer","VTextField","VTextarea","VToolbar","VToolbarTitle"],"mappings":"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","file":"js/chunk-236c8186.4a3e7aef.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/pdf-icon.50434788.png\";","// Mixins\nimport mixins from '../../util/mixins';\nimport BindsAttrs from '../../mixins/binds-attrs';\nimport { provide as RegistrableProvide } from '../../mixins/registrable';\n/* @vue/component */\n\nexport default mixins(BindsAttrs, RegistrableProvide('form')\n/* @vue/component */\n).extend({\n  name: 'v-form',\n  inheritAttrs: false,\n  props: {\n    lazyValidation: Boolean,\n    value: Boolean\n  },\n  data: () => ({\n    inputs: [],\n    watchers: [],\n    errorBag: {}\n  }),\n  watch: {\n    errorBag: {\n      handler(val) {\n        const errors = Object.values(val).includes(true);\n        this.$emit('input', !errors);\n      },\n\n      deep: true,\n      immediate: true\n    }\n  },\n  methods: {\n    watchInput(input) {\n      const watcher = input => {\n        return input.$watch('hasError', val => {\n          this.$set(this.errorBag, input._uid, val);\n        }, {\n          immediate: true\n        });\n      };\n\n      const watchers = {\n        _uid: input._uid,\n        valid: () => {},\n        shouldValidate: () => {}\n      };\n\n      if (this.lazyValidation) {\n        // Only start watching inputs if we need to\n        watchers.shouldValidate = input.$watch('shouldValidate', val => {\n          if (!val) return; // Only watch if we're not already doing it\n\n          if (this.errorBag.hasOwnProperty(input._uid)) return;\n          watchers.valid = watcher(input);\n        });\n      } else {\n        watchers.valid = watcher(input);\n      }\n\n      return watchers;\n    },\n\n    /** @public */\n    validate() {\n      return this.inputs.filter(input => !input.validate(true)).length === 0;\n    },\n\n    /** @public */\n    reset() {\n      this.inputs.forEach(input => input.reset());\n      this.resetErrorBag();\n    },\n\n    resetErrorBag() {\n      if (this.lazyValidation) {\n        // Account for timeout in validatable\n        setTimeout(() => {\n          this.errorBag = {};\n        }, 0);\n      }\n    },\n\n    /** @public */\n    resetValidation() {\n      this.inputs.forEach(input => input.resetValidation());\n      this.resetErrorBag();\n    },\n\n    register(input) {\n      this.inputs.push(input);\n      this.watchers.push(this.watchInput(input));\n    },\n\n    unregister(input) {\n      const found = this.inputs.find(i => i._uid === input._uid);\n      if (!found) return;\n      const unwatch = this.watchers.find(i => i._uid === found._uid);\n\n      if (unwatch) {\n        unwatch.valid();\n        unwatch.shouldValidate();\n      }\n\n      this.watchers = this.watchers.filter(i => i._uid !== found._uid);\n      this.inputs = this.inputs.filter(i => i._uid !== found._uid);\n      this.$delete(this.errorBag, found._uid);\n    }\n\n  },\n\n  render(h) {\n    return h('form', {\n      staticClass: 'v-form',\n      attrs: {\n        novalidate: true,\n        ...this.attrs$\n      },\n      on: {\n        submit: e => this.$emit('submit', e)\n      }\n    }, this.$slots.default);\n  }\n\n});\n//# sourceMappingURL=VForm.js.map","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.$t(\"heading.books\")))]),_c('v-spacer'),_c('v-btn',{staticClass:\"primary\",on:{\"click\":_vm.handleOpenDialog}},[_vm._v(_vm._s(_vm.$t(\"button.create\")))])],1),_c('WrappingTable',{ref:\"table_ref\",attrs:{\"headersName\":_vm.headers,\"pathName\":\"books\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nvar index = ref.index;\nreturn [_c('td',[_c('v-avatar',{attrs:{\"size\":\"50\"}},[_c('v-img',{staticClass:\"hover-pointer\",attrs:{\"aspect-ratio\":\"1\",\"src\":item.main_image && item.main_image.path},on:{\"click\":function($event){return _vm.showImagePreview(item.main_image)}}})],1)],1),_c('td',{staticClass:\"pa-3\"},[_c('a',{attrs:{\"href\":item.book && item.book.path,\"title\":\"book\",\"target\":\"_blank\"}},[_c('v-avatar',{attrs:{\"size\":\"50\"}},[_c('v-img',{staticClass:\"hover-pointer\",attrs:{\"aspect-ratio\":\"1\",\"src\":require('@/assets/imgs/pdf-icon.png')}})],1)],1)]),_c('td',[_vm._v(_vm._s(item.name))]),_c('td',{attrs:{\"title\":item.short_description}},[_vm._v(\"\\n        \"+_vm._s(_vm._f(\"truncate\")(item.short_description))+\"\\n      \")]),_c('td',[_c('v-icon',{attrs:{\"small\":\"\",\"title\":\"edit\"},on:{\"click\":function($event){return _vm.handleEdit(item, index)}}},[_vm._v(\"\\n          mdi-pencil\")]),_c('v-icon',{attrs:{\"small\":\"\",\"title\":\"delete\"},on:{\"click\":function($event){return _vm.handleDelete(item, index)}}},[_vm._v(\"\\n          mdi-delete\")])],1)]}}])}),_c('GenericDialog',{ref:\"dialog_ref\",on:{\"dialog_closed\":_vm.onDialogClose},scopedSlots:_vm._u([{key:\"card-title\",fn:function(){return [_vm._v(_vm._s(_vm.dialogTitle))]},proxy:true},{key:\"card-text\",fn:function(){return [_c('formWrapper',{attrs:{\"validator\":_vm.$v.form}},[_c('v-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('v-row',[(_vm.isEdit)?_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('locale-select',{on:{\"change\":_vm.fireLocaleChange}})],1):_vm._e(),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('form-group',{attrs:{\"name\":\"name\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nvar listeners = ref.listeners;\nreturn [_c('v-text-field',_vm._g(_vm._b({attrs:{\"outlined\":\"\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}},'v-text-field',attrs,false),listeners))]}}])})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('form-group',{attrs:{\"name\":\"short_description\",\"attribute\":\"input.short_description\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nvar listeners = ref.listeners;\nreturn [_c('v-textarea',_vm._g(_vm._b({attrs:{\"outlined\":\"\",\"rows\":\"10\",\"no-resize\":\"\"},model:{value:(_vm.form.short_description),callback:function ($$v) {_vm.$set(_vm.form, \"short_description\", $$v)},expression:\"form.short_description\"}},'v-textarea',attrs,false),listeners))]}}])})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"lg\":\"6\"}},[_c('span',[_vm._v(_vm._s(_vm.$t(\"title.upload_book_cover\")))]),_c('new-image-upload',{staticClass:\"file-upload__image\",attrs:{\"resetToggle\":_vm.resetToggle,\"imgUrl\":_vm.form.main_image && _vm.form.main_image.path,\"imgId\":_vm.form.main_image && Number(_vm.form.main_image.id),\"maxSize\":_vm.imageSize},on:{\"fileSelected\":_vm.uploadPhoto,\"ImageUpdated\":_vm.ImageUpdated}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"lg\":\"6\"}},[_c('span',[_vm._v(_vm._s(_vm.$t(\"title.upload_your_book\")))]),_c('uploadFilePdf',{staticClass:\"file-upload__image\",attrs:{\"maxSize\":_vm.pdfSize,\"fileUrl\":_vm.form.book && _vm.form.book.path,\"fileId\":_vm.form.book && _vm.form.book.id,\"resetToggle\":_vm.resetToggle},on:{\"FileUpdated\":_vm.FileUpdated,\"file_selected\":_vm.UploadFile}})],1),_c('v-col',[_c('v-btn',{staticClass:\"primary\",attrs:{\"loading\":_vm.btnLoading,\"type\":\"submit\",\"disabled\":_vm.$v.form.$invalid || _vm.photoAndFilesExist}},[_vm._v(_vm._s(_vm.$t(\"button.save\")))])],1)],1)],1)],1)]},proxy:true}])}),_c('global-image-preview',{attrs:{\"showDialog\":_vm.imageOverlay,\"imagePath\":_vm.currentPreviewImage && _vm.currentPreviewImage},on:{\"closePreview\":function($event){_vm.imageOverlay = false}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-toolbar flat>\n      <v-toolbar-title>{{ $t(\"heading.books\") }}</v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-btn @click=\"handleOpenDialog\" class=\"primary\">{{\n        $t(\"button.create\")\n      }}</v-btn>\n    </v-toolbar>\n    <!-- table -->\n    <WrappingTable ref=\"table_ref\" :headersName=\"headers\" pathName=\"books\">\n      <template slot-scope=\"{ item, index }\">\n        <td>\n          <v-avatar size=\"50\">\n            <v-img\n              @click=\"showImagePreview(item.main_image)\"\n              class=\"hover-pointer\"\n              aspect-ratio=\"1\"\n              :src=\"item.main_image && item.main_image.path\"\n            ></v-img>\n          </v-avatar>\n        </td>\n        <td class=\"pa-3\">\n          <a :href=\"item.book && item.book.path\" title=\"book\" target=\"_blank\">\n            <v-avatar size=\"50\">\n              <v-img\n                class=\"hover-pointer\"\n                aspect-ratio=\"1\"\n                :src=\"require('@/assets/imgs/pdf-icon.png')\"\n              ></v-img>\n            </v-avatar>\n          </a>\n        </td>\n        <td>{{ item.name }}</td>\n        <td :title=\"item.short_description\">\n          {{ item.short_description | truncate }}\n        </td>\n        <td>\n          <v-icon small title=\"edit\" @click=\"handleEdit(item, index)\">\n            mdi-pencil</v-icon\n          >\n          <v-icon small title=\"delete\" @click=\"handleDelete(item, index)\">\n            mdi-delete</v-icon\n          >\n        </td>\n      </template>\n    </WrappingTable>\n    <!-- table -->\n    <!-- dialog -->\n    <GenericDialog ref=\"dialog_ref\" @dialog_closed=\"onDialogClose\">\n      <template #card-title>{{ dialogTitle }}</template>\n      <template #card-text>\n        <formWrapper :validator=\"$v.form\">\n          <v-form @submit.prevent=\"handleSubmit\">\n            <v-row>\n              <v-col cols=\"12\" v-if=\"isEdit\">\n                <locale-select @change=\"fireLocaleChange\" />\n              </v-col>\n              <v-col cols=\"12\">\n                <form-group name=\"name\">\n                  <template slot-scope=\"{ attrs, listeners }\">\n                    <v-text-field\n                      outlined\n                      v-bind=\"attrs\"\n                      v-on=\"listeners\"\n                      v-model=\"form.name\"\n                    ></v-text-field>\n                  </template>\n                </form-group>\n              </v-col>\n              <v-col cols=\"12\">\n                <form-group\n                  name=\"short_description\"\n                  attribute=\"input.short_description\"\n                >\n                  <template slot-scope=\"{ attrs, listeners }\">\n                    <v-textarea\n                      outlined\n                      v-bind=\"attrs\"\n                      v-on=\"listeners\"\n                      v-model=\"form.short_description\"\n                      rows=\"10\"\n                      no-resize\n                    ></v-textarea>\n                  </template>\n                </form-group>\n              </v-col>\n              <v-col cols=\"12\" lg=\"6\">\n                <span>{{ $t(\"title.upload_book_cover\") }}</span>\n\n                <new-image-upload\n                  :resetToggle=\"resetToggle\"\n                  class=\"file-upload__image\"\n                  @fileSelected=\"uploadPhoto\"\n                  @ImageUpdated=\"ImageUpdated\"\n                  :imgUrl=\"form.main_image && form.main_image.path\"\n                  :imgId=\"form.main_image && Number(form.main_image.id)\"\n                  :maxSize=\"imageSize\"\n                />\n              </v-col>\n              <v-col cols=\"12\" lg=\"6\">\n                <span>{{ $t(\"title.upload_your_book\") }}</span>\n                <uploadFilePdf\n                  @FileUpdated=\"FileUpdated\"\n                  :maxSize=\"pdfSize\"\n                  :fileUrl=\"form.book && form.book.path\"\n                  :fileId=\"form.book && form.book.id\"\n                  :resetToggle=\"resetToggle\"\n                  class=\"file-upload__image\"\n                  @file_selected=\"UploadFile\"\n                />\n              </v-col>\n              <v-col>\n                <v-btn\n                  :loading=\"btnLoading\"\n                  type=\"submit\"\n                  class=\"primary\"\n                  :disabled=\"$v.form.$invalid || photoAndFilesExist\"\n                  >{{ $t(\"button.save\") }}</v-btn\n                >\n              </v-col>\n            </v-row>\n          </v-form>\n        </formWrapper>\n      </template>\n    </GenericDialog>\n    <!-- dialog -->\n    <!-- Image Preview -->\n    <global-image-preview\n      :showDialog=\"imageOverlay\"\n      :imagePath=\"currentPreviewImage && currentPreviewImage\"\n      @closePreview=\"imageOverlay = false\"\n    />\n    <!-- Image Preview -->\n  </div>\n</template>\n\n<script>\nimport { required, minLength, maxLength } from \"vuelidate/lib/validators\";\nimport cookies from \"js-cookie\";\nimport { StoreData, ShowData, UpdateData } from \"@/helpers/apiMethods\";\nexport default {\n  name: \"Books\",\n  components: {\n    GenericDialog: () => import(\"@/components/GenericDialog\"),\n    uploadFilePdf: () => import(\"@/components/uploadFilePdf\")\n  },\n  data() {\n    return {\n      headers: [\"image\", \"book\", \"name\", \"description\", \"configs\"],\n      imageOverlay: false,\n      isEdit: false,\n      form: {\n        name: \"\",\n        short_description: \"\",\n        main_image: \"\",\n        book_file: \"\"\n      },\n      book: {},\n      imageSize: 3,\n      pdfSize: 20,\n      btnLoading: false,\n      resetToggle: false,\n      locale: cookies.get(\"language\") || \"en\",\n      bookIndex: null\n    };\n  },\n  computed: {\n    dialogTitle() {\n      if (!this.isEdit) {\n        return this.$t(\"title.Create_book\");\n      } else {\n        return this.$t(\"title.edit_book\");\n      }\n    },\n    photoAndFilesExist() {\n      if (this.form.main_image === \"\" || this.form.book_file === \"\") {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n  methods: {\n    ImageUpdated() {\n      this.$refs.table_ref.handleGetItems();\n    },\n    FileUpdated() {\n      this.$refs.table_ref.handleGetItems();\n    },\n    fireLocaleChange(locale) {\n      this.locale = locale;\n      this.handleShowData(this.form.slug, locale);\n    },\n    handleSubmit() {\n      const formData = new FormData();\n      this.btnLoading = true;\n      if (this.isEdit) {\n        delete this.form.main_image;\n        delete this.form.book_file;\n        delete this.form.book;\n      }\n      Object.keys(this.form).map(formKey => {\n        formData.append(formKey, this.form[formKey]);\n      });\n\n      if (!this.isEdit) {\n        // in case create book\n        this.createBook(formData);\n      } else {\n        // in case edit book\n        formData.append(\"locale\", this.locale);\n        formData.append(\"_method\", \"put\");\n        this.editBook(formData, this.form.slug);\n      }\n    },\n    async createBook(reqData) {\n      try {\n        const res = await StoreData({ reqName: \"books\", data: reqData });\n        console.log(res);\n        const { book } = res.data;\n        this.$refs.table_ref.items.push(book);\n      } catch (error) {\n        console.log(error);\n      } finally {\n        this.btnLoading = false;\n        this.onDialogClose();\n        this.$refs.dialog_ref.toggleDialog();\n      }\n    },\n    async editBook(reqData, slug) {\n      try {\n        const res = await UpdateData({\n          reqName: \"books\",\n          data: reqData,\n          id: slug\n        });\n\n        const { book } = res.data;\n        console.log(book);\n        this.onDialogClose();\n\n        this.$refs.table_ref.handleUpdateItems(book, this.bookIndex);\n        this.$refs.dialog_ref.toggleDialog();\n      } catch (error) {\n        console.log(error);\n      } finally {\n        this.btnLoading = false;\n      }\n    },\n    async handleShowData(slug, locale) {\n      const res = await ShowData({ reqName: \"books\", id: slug, locale });\n      const { book } = res.data;\n\n      this.form = book;\n    },\n    UploadFile(file) {\n      this.form.book_file = file.file;\n    },\n    handleOpenDialog() {\n      this.$refs.dialog_ref.toggleDialog();\n      this.resetToggle = false;\n    },\n    uploadPhoto(file) {\n      this.form.main_image = file.file;\n    },\n    onDialogClose() {\n      this.$v.$reset();\n      this.isEdit = false;\n      this.resetToggle = true;\n      this.form = {\n        name: \"\",\n        short_description: \"\",\n        main_image: \"\",\n        book_file: \"\"\n      };\n    },\n    handleEdit({ slug }, index) {\n      this.bookIndex = index;\n      this.$refs.dialog_ref.toggleDialog();\n      this.resetToggle = false;\n      this.isEdit = true;\n      this.handleShowData(slug);\n    },\n    handleDelete({ slug }, index) {\n      this.$refs.table_ref.handleDelete(slug, index);\n    },\n    showImagePreview(image) {\n      if (image) {\n        this.currentPreviewImage = image.path;\n        this.imageOverlay = true;\n      }\n    }\n  },\n  validations: {\n    form: {\n      name: {\n        required,\n        minLength: minLength(3),\n        maxLength: maxLength(150)\n      },\n      short_description: {\n        required,\n        minLength: minLength(3),\n        maxLength: maxLength(255)\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=08eb9718&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAvatar } from 'vuetify/lib/components/VAvatar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VAvatar,VBtn,VCol,VForm,VIcon,VImg,VRow,VSpacer,VTextField,VTextarea,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}