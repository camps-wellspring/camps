(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bb23a"],{"39ca":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file"},on:{change:e.onFileChange}}),a("a",{staticClass:"file-upload__image__placeholder hover-pointer",class:{"file-upload__image__placeholder--active":e.pdfFile},attrs:{href:e.fileUrl,target:"_blank"}},[e._v(e._s(e.imageName?e.imageName:e.$t("label.upload_book")))]),a("v-btn",e._g({staticClass:"button button--upload",attrs:{small:"",text:"",title:e.$t("label.upload_book")},on:{click:function(t){return e.$refs.file.click()}}},e.$attrs),[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-cloud-upload")])],1),a("v-dialog",{attrs:{"max-width":"300",persistent:""},model:{value:e.errorDialog,callback:function(t){e.errorDialog=t},expression:"errorDialog"}},[a("v-card",[a("v-card-text",{staticClass:"subheading"},[e._v(e._s(e.FileErrorMessage))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{on:{click:e.resetData}},[e._v(e._s(e.$t("button.got_it")))])],1)],1)],1)],1)},l=[],r=a("61f7"),s=a("2cc4"),o={props:{maxSize:{type:Number,default:1},fileUrl:{type:String,default:null},fileId:{type:Number,default:null},reset:{type:Boolean,default:!1},fieldName:{type:String,default:""},value:{type:String},resetToggle:{type:Boolean,default:!1}},watch:{reset:{handler(e){e&&this.resetFile()},immediate:!1},resetToggle:{handler(e){e&&this.resetFile()},immediate:!0},fileUrl:{handler(e){e&&(this.imageName=this.$t("label.show_image"),this.pdfFile=e)},immediate:!0}},computed:{FileErrorMessage(){return"MIME"===this.errorType?this.$t("validation.file_type"):"SIZE"===this.errorType?this.$t("validation.file_size",{count:this.maxSize}):""}},data(){return{imageName:null,pdfFile:null,errorDialog:null,errorText:"",errorType:"",absolute:!1,overlay:!1,zIndex:990}},methods:{onFileChange(e){if(e.target.files.length>0){let t=e.target.files[0];this.isValidPdfFileType(t)&&this.readImage(t)}},readImage(e){if(this.validateSize(e)&&(this.imageName=e.name,this.pdfFile=URL.createObjectURL(e),e)){let t={file:e};this.fieldName?(t.name=this.fieldName,this.$emit("file_selected",t)):this.$emit("file_selected",t),this.fileId&&this.autoUpdate(t.file)}},autoUpdate(e){let t=new FormData;t.append("file",e),t.append("_method","PUT"),t.append("locale","en"),Object(s["f"])({id:this.fileId,data:t}).then(e=>{const{media:t}=e.data;this.$emit("FileUpdated",t)}).catch(e=>{console.log(e)})},validateSize(e){return!!Object(r["a"])(e.size,this.maxSize)||(this.errorType="SIZE",this.errorDialog=!0,!1)},isValidPdfFileType(e){return!!Object(r["c"])(e)||(this.errorType="MIME",this.errorDialog=!0,!1)},resetFile(){this.imageName=this.$t("label.upload_book"),this.pdfFile=null,this.$refs.file.value=""},resetData(){this.$refs.file.value="",this.errorDialog=!1,setTimeout(()=>{this.errorType=""},300)},showImagePreview(){this.pdfFile&&(this.overlay=!0)}}},d=o,n=a("2877"),h=a("6544"),c=a.n(h),p=a("8336"),f=a("b0af"),u=a("99d9"),m=a("169a"),g=a("132d"),b=a("2fa4"),_=Object(n["a"])(d,i,l,!1,null,null,null);t["default"]=_.exports;c()(_,{VBtn:p["a"],VCard:f["a"],VCardActions:u["a"],VCardText:u["b"],VDialog:m["a"],VIcon:g["a"],VSpacer:b["a"]})}}]);
//# sourceMappingURL=chunk-2d0bb23a.6de2e532.js.map