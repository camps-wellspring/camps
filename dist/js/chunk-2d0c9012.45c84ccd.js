(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c9012"],{"56fa":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("v-toolbar",{staticClass:"mb-4",attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v(e._s(e.$t("heading.works")))]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.$router.push({name:"create_work"})}}},[e._v(e._s(e.$t("button.create")))])],1),a("v-data-table",{attrs:{headers:e.headers,items:e.items,"hide-default-footer":"","items-per-page":20,loading:e.tableLoading},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item,s=t.index;return[a("tr",[a("td",[a("v-avatar",{staticStyle:{cursor:"pointer"},attrs:{size:"40"}},[a("v-img",{attrs:{title:e.$t("label.preview"),"aspect-ratio":"1",src:i.logo?i.logo.path:"@/assets/imgs/user.jpg"},on:{click:function(t){return e.showImagePreview(i.logo)}}})],1)],1),a("td",[e._v(e._s(i.name))]),a("td",{staticClass:"toggle-adjust"},[a("toggle-service",{attrs:{"is-edit":!0,"model-name":"works","model-id":i.id,field:"visible",validate:!0},model:{value:i.visible,callback:function(t){e.$set(i,"visible",t)},expression:"item.visible"}})],1),a("td",[e._v(e._s(i.priority))]),i.description?a("td",[e._v(e._s(e._f("truncate")(i.description)))]):a("td",[e._v("-----")]),a("td",[a("v-btn",{attrs:{title:e.$t("label.features"),icon:"",fab:"",small:""},on:{click:function(t){return e.handleFeatures(i)}}},[a("v-icon",{staticClass:"edit"},[e._v("mdi-star-circle-outline")])],1)],1),a("td",[a("v-icon",{attrs:{medium:"",title:"edit"},on:{click:function(t){return e.handleEdit(i,s)}}},[e._v("mdi-pencil")]),a("v-icon",{attrs:{medium:"",title:"delete"},on:{click:function(t){return e.handleDelete(i,s)}}},[e._v("mdi-delete")])],1)])]}}])}),a("global-image-preview",{attrs:{showDialog:e.imageOverlay,imagePath:e.currentPreviewImage},on:{closePreview:function(t){e.imageOverlay=!1}}}),a("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.showFeaturesDialog,callback:function(t){e.showFeaturesDialog=t},expression:"showFeaturesDialog"}},[e.showFeaturesDialog?a("global-features",{attrs:{FeaturedItemType:"work",FeaturedItemId:e.currentFeaturedItemId},on:{closeFeatures:e.closeFeatures}}):e._e()],1),a("div",{staticClass:"text-xs-center mt-4"},[e.items.length>0&&e.pagination.last_page>1?a("v-pagination",{attrs:{length:e.pagination.last_page,"total-visible":10},on:{input:e.handlePagination},model:{value:e.pagination.current_page,callback:function(t){e.$set(e.pagination,"current_page",t)},expression:"pagination.current_page"}}):e._e()],1)],1)},s=[],r=a("297e"),n=a("2cc4"),o=a("2ef0"),l={name:"Works",components:{GlobalFeatures:()=>a.e("chunk-46ca2a84").then(a.bind(null,"1499"))},data(){return{headers:[],items:[],expanded:[],pagination:{},singleExpand:!1,showFeaturesDialog:!1,tableLoading:!0,queries:{},imageOverlay:!1,currentPreviewImage:""}},mounted(){this.createTableHeaders()},methods:{showImagePreview(e){e&&(this.currentPreviewImage=e.path,this.imageOverlay=!0)},closeFeatures(){this.showFeaturesDialog=!1},handleFeatures({id:e}){this.showFeaturesDialog=!0,this.currentFeaturedItemId=e},handlePagination(e){this.queries={...this.queries,page:e},Object(o["isEqual"])(this.queries,this.$route.query)||this.$router.push({query:this.queries})},handleEdit({slug:e}){this.$router.push({name:"edit_work",params:{slug:e}})},handleDelete({slug:e},t){this.popUp().then(a=>{a.dismiss||Object(n["a"])({reqName:"works",id:e}).then(()=>{this.$delete(this.items,t)}).catch(e=>console.log(e))})},handleGetWorks(e){Object(n["b"])({reqName:"works",query:e}).then(e=>{const{data:t,meta:a}=e.data;this.items=t,this.pagination=a}).catch(e=>{console.log(e)}).finally(()=>{this.tableLoading=!1})},createTableHeaders(){const e=["logo","name","visible","priority","description","features","configs"];this.headers=Object(r["a"])(e)}},watch:{$route:{handler(e){const{query:t}=e;this.queries=t,this.handleGetWorks(t)},immediate:!0}}},c=l,d=a("2877"),u=a("6544"),h=a.n(u),g=a("8212"),m=a("8336"),p=a("8fea"),v=a("169a"),b=a("ce7e"),w=a("132d"),f=a("adda"),_=a("891e"),k=a("2fa4"),F=a("71d9"),y=a("2a7f"),I=Object(d["a"])(c,i,s,!1,null,null,null);t["default"]=I.exports;h()(I,{VAvatar:g["a"],VBtn:m["a"],VDataTable:p["a"],VDialog:v["a"],VDivider:b["a"],VIcon:w["a"],VImg:f["a"],VPagination:_["a"],VSpacer:k["a"],VToolbar:F["a"],VToolbarTitle:y["b"]})}}]);
//# sourceMappingURL=chunk-2d0c9012.45c84ccd.js.map