(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e4c90"],{9267:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("form-wrapper",{attrs:{validator:e.$v.form}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("v-row",[e.isEdited?a("v-col",{attrs:{cols:"12"}},[a("locale-select",{on:{change:e.fireLocaleChange}})],1):e._e(),a("v-col",{attrs:{cols:"12",md:"6"}},[a("new-image-upload",{staticClass:"file-upload__image",attrs:{imgUrl:e.form.main_image?e.form.main_image.path:"",imgId:e.form.main_image?e.form.main_image.id:null,resetToggle:e.resetImage,maxSize:e.maxsize},on:{fileSelected:e.handleImageSelect,ImageUpdated:e.handleImageUpdate}})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("form-group",{attrs:{name:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.attrs;return[a("v-text-field",e._b({attrs:{outlined:"",label:e.$t("label.name")},on:{input:function(t){return e.hadleChange("name")}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},"v-text-field",i,!1))]}}])})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("form-group",{attrs:{name:"position"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.attrs;return[a("v-text-field",e._b({attrs:{outlined:"",label:e.$t("label.position")},on:{input:function(t){return e.hadleChange("position")}},model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}},"v-text-field",i,!1))]}}])})],1),a("v-col",{attrs:{cols:"12",md:"6"}},[a("form-group",{attrs:{name:"priority"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.attrs;return[a("v-text-field",e._b({attrs:{outlined:"",label:e.$t("label.priority")},on:{input:function(t){return e.hadleChange("priority")}},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}},"v-text-field",i,!1))]}}])})],1),a("v-col",{attrs:{cols:"12"}},[a("form-group",{attrs:{name:"bio"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.attrs;return[a("v-textarea",e._b({attrs:{"auto-grow":"","row-height":"20",outlined:"",label:e.$t("label.bio")},on:{input:function(t){return e.hadleChange("bio")}},model:{value:e.form.bio,callback:function(t){e.$set(e.form,"bio",t)},expression:"form.bio"}},"v-textarea",i,!1))]}}])})],1),a("v-col",{attrs:{cols:"12"}},[a("v-btn",{staticClass:"primary",attrs:{type:"submit",disabled:e.$v.form.$invalid,loading:e.btnLoading}},[e._v(e._s(e.$t("button.save")))]),a("v-btn",e._g({staticClass:"warning mx-2"},e.$listeners),[e._v(e._s(e.$t("button.close")))])],1)],1)],1)])],1)},n=[],o=a("b5ae"),r=a("2cc4"),s=a("a78e"),l=a.n(s),m=a("61f7"),d={name:"FormComponent",props:{isEdited:{type:Boolean,default:!1,required:!0},slug:{type:String,required:!0}},data(){return{resetImage:!1,locale:l.a.get("language"),form:{name:"",bio:"",position:"",priority:"",main_image:""},imageFile:"",maxsize:4,btnLoading:!1,inputChange:!1,imageChange:!1}},methods:{handleImageUpdate(e){this.$emit("update_main_image",e)},fireLocaleChange(e){this.locale=e,this.showData(e)},showData(e){Object(r["c"])({reqName:"members",id:this.slug,locale:e}).then(e=>{const{member:t}=e.data;this.form=t}).catch(e=>{console.log(e)})},buildData(){const e=new FormData;return Object.keys(this.form).map(t=>{e.append(t,this.form[t])}),e.append("locale",this.locale),e},createMethod(){this.btnLoading=!0;const e=this.buildData();Object(r["d"])({reqName:"members",data:e}).then(e=>{const{member:t}=e.data;this.$emit("set_memeber",t)}).catch(e=>{console.log(e)}).finally(()=>{this.btnLoading=!1,this.reset()})},editMethod(){const{name:e,position:t,bio:a,priority:i}=this.form;Object(r["e"])({reqName:"members",data:{name:e,position:t,bio:a,priority:i,locale:this.locale,_method:"put"},id:this.slug}).then(e=>{const{member:t}=e.data;this.$emit("set_edited_member",t),this.reset()}).catch(e=>{console.log(e)}).finally(()=>{this.btnLoading=!1})},handleUpdateImage(){const{id:e}=this.form.main_image,t=new FormData;t.append("file",this.imageFile),t.append("_method","put"),t.append("locale",this.locale),Object(r["f"])({id:e,data:t}).then(()=>{this.$emit("set_refresh")}).catch(e=>{console.log(e)}).finally(()=>{this.reset()})},handleSubmit(){this.btnLoading=!0,this.isEdited?this.isEdited&&this.inputChange&&this.editMethod():this.createMethod(),this.imageChange&&this.isEdited&&this.handleUpdateImage()},handleImageSelect(e){this.isEdited?this.imageFile=e.file:this.form.main_image=e.file,this.imageChange=!0},hadleChange(e){this.$v.form[e].$touch(),this.inputChange=!0},reset(){this.$emit("close_dialog"),this.$v.form.$reset(),this.form={},this.resetImage=!0,this.imageChange=!1,this.inputChange=!1,this.btnLoading=!1,this.imageChange=!1,this.$store.dispatch("ClearServerErrors")}},mounted(){window.eventBus.$on("SET_DIALOG",e=>{e||(this.reset(),this.$emit("toggleEdit"))})},validations(){return{form:{name:{required:o["required"],minLength:Object(o["minLength"])(3),maxLength:Object(o["maxLength"])(50)},position:{required:o["required"],minLength:Object(o["minLength"])(3),maxLength:Object(o["maxLength"])(50)},priority:{required:o["required"],numeric:o["numeric"]},main_image:{required:o["required"]},bio:{minLength:Object(o["minLength"])(3),maxWords:Object(m["c"])(120)}}}},watch:{isEdited:{handler(e){e&&this.showData()},immediate:!0}}},h=d,c=a("2877"),u=a("6544"),g=a.n(u),f=a("8336"),p=a("62ad"),b=a("a523"),v=a("0fd9"),_=a("8654"),$=a("a844"),x=Object(c["a"])(h,i,n,!1,null,"5e7143d5",null);t["default"]=x.exports;g()(x,{VBtn:f["a"],VCol:p["a"],VContainer:b["a"],VRow:v["a"],VTextField:_["a"],VTextarea:$["a"]})}}]);
//# sourceMappingURL=chunk-2d0e4c90.06a1ccc7.js.map