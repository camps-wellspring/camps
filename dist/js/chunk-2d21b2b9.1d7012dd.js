(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b2b9"],{bf43:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("form-wrapper",{attrs:{validator:e.$v.form}},[a("form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-switch",{attrs:{label:e.$t("label.close"),disabled:e.form.status&&2===e.form.status},model:{value:e.form.closed,callback:function(t){e.$set(e.form,"closed",t)},expression:"form.closed"}})],1),e._l(e.nameFields,(function(t,s){return a("v-col",{key:s,attrs:{cols:"12",md:"6"}},[a("TextField",{attrs:{model:e.form,fieldName:t}})],1)})),a("v-col",{attrs:{cols:"12",md:"6"}},[a("TextField",{attrs:{model:e.form,fieldName:"topic_id",inputType:"select",loading:e.loading,items:e.items}})],1),a("v-col",{attrs:{cols:"12"}},[a("TextField",{attrs:{model:e.form,fieldName:"message",inputType:"textarea"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-btn",{staticClass:"primary",attrs:{type:"submit",disabled:e.$v.form.$invalid,loading:e.btnLoading}},[e._v(e._s(e.$t("button.save")))]),a("v-btn",e._g({staticClass:"warning mx-2"},e.$listeners),[e._v(e._s(e.$t("button.close")))])],1)],2)],1)])],1)},o=[],i=a("b5ae"),n=a("2cc4"),r=a("a78e"),l=a.n(r),d={name:"FormComponent",props:{id:{type:Number,required:!0},isEdited:{type:Boolean,default:!1,required:!0}},data(){return{form:{user_name:"",user_phone:"",user_email:"",topic_id:"",message:"",closed:!1},nameFields:["user_name","user_email","user_phone"],btnLoading:!1,loading:!0,items:[],locale:l.a.get("language")}},methods:{resetData(){this.$emit("close_dialog"),this.$v.form.$reset(),this.form={},this.btnLoading=!1,this.$store.dispatch("ClearServerErrors")},toggleDialog(){window.eventBus.$on("SET_DIALOG",e=>{e||(this.resetData(),console.log(e),this.$emit("toggleEdit"))})},handleShowData(){this.id&&Object(n["c"])({reqName:"contact-messages",id:this.id}).then(e=>{const{contact_message:t}=e.data;this.form=t,this.form.topic_id=t.topic.id,2===t.status&&(this.form.closed=!0),delete this.form.topic,delete this.form.attachments,console.log(t)}).catch(e=>console.log(e))},handleGetTopics(){Object(n["b"])({reqName:"topics"}).then(e=>{this.loading=!1;const{data:t}=e.data;this.items=t,console.log(t)}).catch(e=>console.log(e))},handleSubmit(){this.btnLoading=!0;const e={...this.form,_method:"put",locale:this.locale};Object(n["e"])({reqName:"contact-messages",data:e,id:this.id}).then(e=>{const{contact_message:t}=e.data;this.$emit("set_edite",t),this.resetData()}).catch(e=>console.log(e)).finally(()=>{this.btnLoading=!1})}},mounted(){this.toggleDialog(),this.handleGetTopics()},validations(){return{form:{user_name:{required:i["required"],maxLength:Object(i["maxLength"])(20)},user_phone:{numeric:i["numeric"],required:i["required"],maxLength:Object(i["maxLength"])(20)},user_email:{required:i["required"],email:i["email"]},topic_id:{required:i["required"],type:String},message:{required:i["required"],minLength:Object(i["minLength"])(15),maxLength:Object(i["maxLength"])(500)}}}},watch:{isEdited:{handler(e){e&&(this.handleShowData(),console.log(e))},immediate:!0}}},c=d,m=a("2877"),h=a("6544"),u=a.n(h),g=a("8336"),f=a("62ad"),p=a("a523"),b=a("0fd9"),_=a("b73d"),v=Object(m["a"])(c,s,o,!1,null,null,null);t["default"]=v.exports;u()(v,{VBtn:g["a"],VCol:f["a"],VContainer:p["a"],VRow:b["a"],VSwitch:_["a"]})}}]);
//# sourceMappingURL=chunk-2d21b2b9.1d7012dd.js.map