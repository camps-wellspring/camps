{"version":3,"sources":["webpack:///./src/views/contacts/FormComponent.vue?ebe2","webpack:///src/views/contacts/FormComponent.vue","webpack:///./src/views/contacts/FormComponent.vue?8b42","webpack:///./src/views/contacts/FormComponent.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","$v","form","on","$event","preventDefault","handleSubmit","$t","status","model","value","callback","$$v","$set","expression","_l","field","index","key","loading","items","staticClass","$invalid","btnLoading","_v","_s","_g","$listeners","staticRenderFns","name","props","id","type","Number","required","isEdited","Boolean","default","user_name","user_phone","user_email","topic_id","message","closed","nameFields","locale","get","methods","$emit","$reset","$store","dispatch","window","eventBus","$on","resetData","console","log","reqName","then","res","contact_message","data","topic","attachments","catch","err","reqData","_method","finally","toggleDialog","handleGetTopics","maxLength","numeric","email","String","minLength","watch","handleShowData","immediate","component","VBtn","VCol","VContainer","VRow","VSwitch"],"mappings":"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","file":"js/chunk-2d21b2b9.7d3dca65.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('form-wrapper',{attrs:{\"validator\":_vm.$v.form}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-switch',{attrs:{\"label\":_vm.$t('label.close'),\"disabled\":_vm.form.status && _vm.form.status === 2},model:{value:(_vm.form.closed),callback:function ($$v) {_vm.$set(_vm.form, \"closed\", $$v)},expression:\"form.closed\"}})],1),_vm._l((_vm.nameFields),function(field,index){return _c('v-col',{key:index,attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('TextField',{attrs:{\"model\":_vm.form,\"fieldName\":field}})],1)}),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('TextField',{attrs:{\"model\":_vm.form,\"fieldName\":\"topic_id\",\"inputType\":\"select\",\"loading\":_vm.loading,\"items\":_vm.items}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('TextField',{attrs:{\"model\":_vm.form,\"fieldName\":\"message\",\"inputType\":\"textarea\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{staticClass:\"primary\",attrs:{\"type\":\"submit\",\"disabled\":_vm.$v.form.$invalid,\"loading\":_vm.btnLoading}},[_vm._v(_vm._s(_vm.$t(\"button.save\")))]),_c('v-btn',_vm._g({staticClass:\"warning mx-2\"},_vm.$listeners),[_vm._v(_vm._s(_vm.$t(\"button.close\")))])],1)],2)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <form-wrapper :validator=\"$v.form\">\n      <form @submit.prevent=\"handleSubmit\">\n        <v-row>\n          <v-col cols=\"12\">\n            <v-switch\n              :label=\"$t('label.close')\"\n              v-model=\"form.closed\"\n              :disabled=\"form.status && form.status === 2\"\n            ></v-switch>\n          </v-col>\n          <v-col cols=\"12\" md=\"6\" v-for=\"(field, index) in nameFields\" :key=\"index\">\n            <TextField :model=\"form\" :fieldName=\"field\" />\n          </v-col>\n          <v-col cols=\"12\" md=\"6\">\n            <TextField\n              :model=\"form\"\n              fieldName=\"topic_id\"\n              inputType=\"select\"\n              :loading=\"loading\"\n              :items=\"items\"\n            />\n          </v-col>\n          <v-col cols=\"12\">\n            <TextField :model=\"form\" fieldName=\"message\" inputType=\"textarea\" />\n          </v-col>\n          <v-col cols=\"12\">\n            <v-btn\n              type=\"submit\"\n              class=\"primary\"\n              :disabled=\"$v.form.$invalid\"\n              :loading=\"btnLoading\"\n              >{{ $t(\"button.save\") }}</v-btn\n            >\n            <v-btn class=\"warning mx-2\" v-on=\"$listeners\">{{ $t(\"button.close\") }}</v-btn>\n          </v-col>\n        </v-row>\n      </form>\n    </form-wrapper>\n  </v-container>\n</template>\n\n<script>\nimport { required, minLength, maxLength, numeric, email } from \"vuelidate/lib/validators\";\nimport { UpdateData, IndexData, ShowData } from \"@/helpers/apiMethods\";\n\nimport Cookies from \"js-cookie\";\nexport default {\n  name: \"FormComponent\",\n  props: {\n    id: {\n      type: Number,\n      required: true\n    },\n    isEdited: {\n      type: Boolean,\n      default: false,\n      required: true\n    }\n  },\n  data() {\n    return {\n      form: {\n        user_name: \"\",\n        user_phone: \"\",\n        user_email: \"\",\n        topic_id: \"\",\n        message: \"\",\n        closed: false\n      },\n      nameFields: [\"user_name\", \"user_email\", \"user_phone\"],\n      btnLoading: false,\n      loading: true,\n      items: [],\n      locale: Cookies.get(\"language\")\n    };\n  },\n  methods: {\n    resetData() {\n      this.$emit(\"close_dialog\");\n      this.$v.form.$reset();\n      this.form = {};\n      this.btnLoading = false;\n      this.$store.dispatch(\"ClearServerErrors\");\n    },\n    toggleDialog() {\n      window.eventBus.$on(\"SET_DIALOG\", value => {\n        if (!value) {\n          this.resetData();\n          console.log(value);\n          this.$emit(\"toggleEdit\");\n        }\n      });\n    },\n    handleShowData() {\n      if (this.id) {\n        ShowData({ reqName: \"contact-messages\", id: this.id })\n          .then(res => {\n            const { contact_message } = res.data;\n            this.form = contact_message;\n            this.form.topic_id = contact_message.topic.id;\n            if (contact_message.status === 2) {\n              this.form.closed = true;\n            }\n            delete this.form.topic;\n            delete this.form.attachments;\n            console.log(contact_message);\n          })\n          .catch(err => console.log(err));\n      }\n    },\n    handleGetTopics() {\n      IndexData({ reqName: \"topics\" })\n        .then(res => {\n          this.loading = false;\n          const { data } = res.data;\n          this.items = data;\n          console.log(data);\n        })\n        .catch(err => console.log(err));\n    },\n    handleSubmit() {\n      this.btnLoading = true;\n      const reqData = { ...this.form, _method: \"put\", locale: this.locale };\n      UpdateData({ reqName: \"contact-messages\", data: reqData, id: this.id })\n        .then(res => {\n          const { contact_message } = res.data;\n\n          this.$emit(\"set_edite\", contact_message);\n          this.resetData();\n        })\n        .catch(err => console.log(err))\n        .finally(() => {\n          this.btnLoading = false;\n        });\n    }\n  },\n  mounted() {\n    this.toggleDialog();\n\n    this.handleGetTopics();\n  },\n  validations() {\n    return {\n      form: {\n        user_name: {\n          required,\n          maxLength: maxLength(20)\n        },\n        user_phone: {\n          numeric,\n          required,\n          maxLength: maxLength(20)\n        },\n        user_email: {\n          required,\n          email\n        },\n        topic_id: {\n          required,\n          type: String\n        },\n        message: {\n          required,\n          minLength: minLength(15),\n          maxLength: maxLength(500)\n        }\n      }\n    };\n  },\n  watch: {\n    isEdited: {\n      handler(value) {\n        if (value) {\n          this.handleShowData();\n          console.log(value);\n        }\n      },\n      immediate: true\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vuetify-loader/lib/loader.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FormComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FormComponent.vue?vue&type=template&id=a773db36&\"\nimport script from \"./FormComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./FormComponent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSwitch } from 'vuetify/lib/components/VSwitch';\ninstallComponents(component, {VBtn,VCol,VContainer,VRow,VSwitch})\n"],"sourceRoot":""}