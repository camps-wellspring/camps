(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-317a5b44","chunk-46ca2a84"],{1499:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v(e._s(this.$t("label.features")))]),a("v-divider"),a("v-card-text",{staticClass:"py-2"},[e.editMode?a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"6"}},[a("locale-select",{on:{change:e.fireLocaleChange}})],1)],1):e._e(),a("v-form",[a("form-wrapper",{attrs:{validator:e.$v.feature}},[a("v-row",[a("v-col",{attrs:{md:"6",sm:"8",cols:"12"}},[a("form-group",{attrs:{name:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.attrs;return[a("v-text-field",e._b({attrs:{label:e.$t("label.name"),outlined:""},on:{blur:function(t){return e.$v.feature.name.$touch()}},model:{value:e.feature.name,callback:function(t){e.$set(e.feature,"name",t)},expression:"feature.name"}},"v-text-field",s,!1))]}}])})],1),a("v-col",{staticClass:"d-flex justify-end",attrs:{md:"6",sm:"4",cols:"12"}},[a("v-btn",{attrs:{color:"primary",large:"",loading:e.loading.save},on:{click:e.save}},[e._v(e._s(e.$t("button.save")))]),e.editMode?a("v-btn",{staticClass:"mx-1",attrs:{color:"secondary",large:""},on:{click:e.reset}},[e._v(e._s(e.$t("button.reset")))]):e._e()],1)],1)],1)],1),a("v-data-table",{attrs:{headers:e.headers,items:e.features,"hide-default-footer":"",loading:e.tableLoading,"items-per-page":20},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item,i=t.index;return[a("tr",[a("td",[e._v(e._s(s.name))]),a("td",[a("v-icon",{staticClass:"edit",attrs:{small:"",title:e.$t("label.edit")},on:{click:function(t){return e.handleEdit(s)}}},[e._v("mdi-pencil")]),a("v-icon",{staticClass:"delete",attrs:{title:e.$t("label.delete"),small:""},on:{click:function(t){return e.handleDelete(s,i)}}},[e._v("mdi-delete")])],1)])]}}])})],1),a("v-divider",{staticClass:"mx-5"}),a("v-card-actions",{staticClass:"py-4 mx-2"},[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",large:""},on:{click:e.closeFeatures}},[e._v(e._s(e.$t("button.close")))])],1)],1)},i=[],r=a("297e"),l=a("2cc4"),n=a("a78e"),o=a.n(n),d=a("b5ae"),c={name:"global-features",props:{FeaturedItemType:{type:String,default:"service"},FeaturedItemId:{type:Number,required:!0}},mounted(){this.createTableHeaders(),this.getFeatures()},data(){return{headers:[],features:[],editMode:!1,feature:{name:""},currentFeatureId:null,currentFeatureIndex:null,locale:o.a.get("language"),tableLoading:!0,loading:{save:!1}}},methods:{getFeatures(){console.log("getting features"),Object(l["b"])({reqName:`${this.FeaturedItemType}-features?${this.FeaturedItemType}_id=${this.FeaturedItemId}`}).then(e=>{const{data:t}=e.data;this.features=[...t]}).catch(e=>{console.log(e)}).finally(()=>{this.tableLoading=!1})},createTableHeaders(){const e=["name","actions"];this.headers=Object(r["a"])(e)},fireLocaleChange(e){this.locale=e,this.getFeatureData()},handleEdit({id:e},t){this.currentFeatureId=e,this.currentFeatureIndex=t,this.editMode=!0,this.getFeatureData()},getFeatureData(){Object(l["c"])({reqName:`${this.FeaturedItemType}-features`,id:this.currentFeatureId,locale:this.locale}).then(e=>{this.feature.name=e.data[`${this.FeaturedItemType}_feature`].name}).catch(e=>{console.log(e)})},save(){this.loading.save=!0,this.editMode?this.UpdateFeature():this.StoreFeature()},StoreFeature(){let e={...this.feature};e[`${this.FeaturedItemType}_id`]=this.FeaturedItemId,Object(l["d"])({reqName:`${this.FeaturedItemType}-features`,data:e}).then(e=>{this.loading.save=!1,console.log("store",e),this.features.push(e.data[`${this.FeaturedItemType}_feature`]),this.reset()}).catch(e=>{console.log(e),this.loading.save=!1})},UpdateFeature(){Object(l["e"])({reqName:`${this.FeaturedItemType}-features`,id:this.currentFeatureId,data:{...this.feature,locale:this.locale}}).then(e=>{this.features.splice(this.currentFeatureIndex,1,e.data[`${this.FeaturedItemType}_feature`]),console.log("update",e),this.loading.save=!1,this.reset()}).catch(e=>{console.log(e),this.loading.save=!1})},handleDelete({id:e},t){this.popUp().then(a=>{a.dismiss||Object(l["a"])({reqName:`${this.FeaturedItemType}-features`,id:e}).then(()=>{this.features.splice(t,1)}).catch(e=>console.log(e))})},reset(){this.$v.$reset(),this.feature={name:""},this.editMode=!1,this.locale=o.a.get("language")},closeFeatures(){this.$emit("closeFeatures")}},validations(){return{feature:{name:{required:d["required"],minLength:Object(d["minLength"])(3),maxLength:Object(d["maxLength"])(20)}}}}},u=c,h=a("2877"),m=a("6544"),v=a.n(m),g=a("8336"),f=a("b0af"),p=a("99d9"),b=a("62ad"),_=a("8fea"),F=a("ce7e"),$=a("4bd4"),w=a("132d"),I=a("0fd9"),y=a("2fa4"),x=a("8654"),V=Object(h["a"])(u,s,i,!1,null,null,null);t["default"]=V.exports;v()(V,{VBtn:g["a"],VCard:f["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VCol:b["a"],VDataTable:_["a"],VDivider:F["a"],VForm:$["a"],VIcon:w["a"],VRow:I["a"],VSpacer:y["a"],VTextField:x["a"]})},"4bd4":function(e,t,a){"use strict";var s=a("58df"),i=a("7e2b"),r=a("3206");t["a"]=Object(s["a"])(i["a"],Object(r["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>{return e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0})},a={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",s=>{s&&(this.errorBag.hasOwnProperty(e._uid)||(a.valid=t(e)))}):a.valid=t(e),a},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const a=this.watchers.find(e=>e._uid===t._uid);a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},"9ace":function(e,t,a){e.exports=a.p+"img/user.24d66af2.png"},b30a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",[s("global-toolbar",{attrs:{title:"services",actionButton:!0},on:{ButtonClicked:e.createService}}),s("v-data-table",{attrs:{headers:e.headers,items:e.services,"hide-default-footer":"",loading:e.tableLoading},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item,r=t.index;return[s("tr",[s("td",[s("v-avatar",{attrs:{size:"40",color:"grey"}},[i.main_image?s("img",{staticClass:"hover-pointer",attrs:{src:i.main_image.path,title:e.$t("label.preview"),alt:e.$t("label.service_photo")},on:{click:function(t){return e.showImagePreview(i.main_image)}}}):s("img",{attrs:{src:a("9ace"),title:e.$t("label.no_photo"),alt:e.$t("label.service_photo")}})])],1),s("td",[e._v(e._s(i.name))]),s("td",{attrs:{title:i.short_description}},[s("read-more",{staticClass:"read-more",attrs:{text:i.short_description,"max-chars":20,"less-str":"read less"}})],1),s("td",[e._v(e._s(i.priority))]),s("td",{staticClass:"toggle-adjust"},[s("toggle-service",{attrs:{"is-edit":!0,"model-name":"service","model-id":i.id,field:"visible",validate:!0},model:{value:i.visible,callback:function(t){e.$set(i,"visible",t)},expression:"item.visible"}})],1),s("td",[s("v-btn",{attrs:{title:e.$t("label.features"),color:i.features.length>0?"primary":"red",icon:"",fab:"",small:""},on:{click:function(t){return e.handleFeatures(i)}}},[s("v-icon",{staticClass:"edit"},[e._v("mdi-star-circle-outline")])],1)],1),s("td",[s("v-btn",{attrs:{title:e.$t("label.sub_services"),color:i.sub_services.length>0?"primary":"red",icon:"",fab:"",small:"",outlined:""},on:{click:function(t){return e.handleSubs(i)}}},[s("v-icon",{staticClass:"edit"},[e._v("mdi-file-tree")])],1)],1),s("td",[s("v-icon",{staticClass:"edit",attrs:{small:"",title:e.$t("label.edit")},on:{click:function(t){return e.handleEdit(i)}}},[e._v("mdi-pencil")]),s("v-icon",{staticClass:"delete",attrs:{title:e.$t("label.delete"),small:""},on:{click:function(t){return e.handleDelete(i,r)}}},[e._v("mdi-delete")])],1)])]}}])}),s("global-image-preview",{attrs:{showDialog:e.imageOverlay,imagePath:e.currentPreviewImage},on:{closePreview:function(t){e.imageOverlay=!1}}}),s("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.showFeaturesDialog,callback:function(t){e.showFeaturesDialog=t},expression:"showFeaturesDialog"}},[e.showFeaturesDialog?s("global-features",{attrs:{FeaturedItemId:e.currentFeaturedItemId},on:{closeFeatures:e.closeFeatures}}):e._e()],1)],1)},i=[],r=a("297e"),l=a("2cc4"),n=a("1499"),o={name:"services",data(){return{headers:[],services:[],tableLoading:!0,showFeaturesDialog:!1,currentFeaturedItemId:null,imageOverlay:!1,currentPreviewImage:"",pagination:{},queries:{}}},mounted(){this.createTableHeaders(),this.getServices()},components:{GlobalFeatures:n["default"]},methods:{createTableHeaders(){const e=["image","name","description","priority","visibility","features","sub_services","actions"];this.headers=Object(r["a"])(e)},createService(){this.$router.push({name:"HandleService",params:{slug:"new"}})},getServices(){Object(l["b"])({reqName:"services"}).then(e=>{const{data:t}=e.data;this.services=t}).catch(e=>{console.log(e)}).finally(()=>{this.tableLoading=!1})},showImagePreview(e){e&&(this.currentPreviewImage=e.path,this.imageOverlay=!0)},handleFeatures({id:e}){this.showFeaturesDialog=!0,this.currentFeaturedItemId=e},handleSubs({id:e}){this.$router.push({name:"SubServices",params:{id:e}})},handleEdit({slug:e}){this.$router.push({name:"HandleService",params:{slug:e}})},handleDelete({slug:e},t){this.popUp().then(a=>{a.dismiss||Object(l["a"])({reqName:"services",id:e}).then(()=>{this.services.splice(t,1)}).catch(e=>console.log(e))})},handlePagination(e){this.queries.page=e,this.$router.push({query:this.queries})},closeFeatures(){this.showFeaturesDialog=!1}}},d=o,c=a("2877"),u=a("6544"),h=a.n(u),m=a("8212"),v=a("8336"),g=a("8fea"),f=a("169a"),p=a("132d"),b=Object(c["a"])(d,s,i,!1,null,null,null);t["default"]=b.exports;h()(b,{VAvatar:m["a"],VBtn:v["a"],VDataTable:g["a"],VDialog:f["a"],VIcon:p["a"]})}}]);
//# sourceMappingURL=chunk-317a5b44.99da2d3a.js.map