(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36e9662d"],{"4bd4":function(t,e,i){"use strict";var a=i("58df"),o=i("7e2b"),r=i("3206");e["a"]=Object(a["a"])(o["a"],Object(r["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>{return t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0})},i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",a=>{a&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))}):i.valid=e(t),i},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const i=this.watchers.find(t=>t._uid===e._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},7957:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-page"},[i("v-container",["update"===t.actionType?i("locale-select",{attrs:{loading:t.loading.fetch},on:{change:t.handleLocaleChange}}):t._e(),i("form-wrapper",{attrs:{validator:t.$v.form}},[i("v-form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[i("v-card",[i("v-card-title",[t._v(t._s(t.$t("heading.main_info")))]),i("v-card-text",[i("v-container",{attrs:{fluid:""}},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"6"}},[i("form-group",{attrs:{name:"name"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs;return[i("v-text-field",t._b({attrs:{outlined:"",label:t.$t("label.name")},on:{blur:function(e){return t.$v.form.name.$touch()}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},"v-text-field",a,!1))]}}])})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("form-group",{attrs:{name:"main_media"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs;return[i("new-image-upload",t._b({staticClass:"file-upload__image",attrs:{imgUrl:t.form.main_media&&t.form.main_media.path,imgId:t.form.main_media&&t.form.main_media.id},on:{fileSelected:t.handleImgSelect}},"new-image-upload",a,!1))]}}])})],1),i("v-col",{attrs:{cols:"12"}},[i("form-group",{attrs:{name:"description"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs;return[i("v-textarea",t._b({attrs:{outlined:"","no-resize":"","auto-grow":"",label:t.$t("label.description")},on:{blur:function(e){return t.$v.form.description.$touch()}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"===typeof e?e.trim():e)},expression:"form.description"}},"v-textarea",a,!1))]}}])})],1),i("v-col",{attrs:{cols:"12"}},[i("form-group",{attrs:{name:"short_description"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs;return[i("v-textarea",t._b({attrs:{outlined:"","no-resize":"",rows:"3",label:t.$t("label.short_description")},on:{blur:function(e){return t.$v.form.short_description.$touch()}},model:{value:t.form.short_description,callback:function(e){t.$set(t.form,"short_description","string"===typeof e?e.trim():e)},expression:"form.short_description"}},"v-textarea",a,!1))]}}])})],1)],1)],1)],1)],1),i("media",{attrs:{photos:t.mediaPhotos},on:{ImgSelected:function(e){t.form.photos=e},ImgDeleted:function(e){return t.form.photos.splice(e,1)}}}),i("demos",{attrs:{"demo-types":t.options["demo-types"],"added-demos":t.form.demos},on:{AddDemo:t.pushToTable,DeleteDemo:t.removeFromTable}}),i("platforms",{attrs:{platforms:t.options.platforms,"added-platforms":t.form.platforms},on:{AddPlatform:t.pushToTable,DeletePlatform:t.removeFromTable}}),i("options",{attrs:{options:t.additionalOptions},on:{categoriesUpdated:function(e){t.form.categories=e},technologiesUpdated:function(e){t.form.technologies=e}}}),i("div",{staticClass:"d-flex justify-center"},[i("v-btn",{staticClass:"primary my-5",attrs:{"x-large":"",type:"submit",disabled:t.$v.form.$invalid,loading:t.loading.submit}},[t._v(t._s(t.$t("button.submit")))])],1)],1)],1)],1),i("global-image-preview",{attrs:{"image-path":t.currImg,"show-dialog":t.imgPreviewDialog},on:{closePreview:t.closePreview}})],1)},o=[],r=i("b5ae"),s=i("61f7"),n=i("2cc4"),d=i("2ef0");
//! works only with:
const l=t=>{let e=new FormData;for(const i in t)Object(d["isEmpty"])(t[i])?t[i]instanceof File&&e.append(i,t[i]):t[i]instanceof Array?t[i].some(t=>"object"===typeof t&&!(t instanceof File))?t[i].forEach((t,a)=>{for(const o in t)e.append(`${i}[${a}][${o}]`,t[o])}):(t[i].some(t=>t instanceof File),t[i].forEach((t,a)=>e.append(`${i}[${a}]`,t))):e.append(i,t[i]);return e};var c=i("ba06"),m=i("9257"),h={name:"CreateProject",components:{Demos:()=>i.e("chunk-2d21a37a").then(i.bind(null,"bb26")),Media:()=>i.e("chunk-2d0d05dc").then(i.bind(null,"6859")),Platforms:()=>i.e("chunk-2d0e64a9").then(i.bind(null,"97b7")),Options:()=>i.e("chunk-2d0e8f68").then(i.bind(null,"8c07"))},mixins:[c["a"],m["a"]],data(){return{form:{name:"",description:"",short_description:"",main_media:null,photos:[],demos:[],platforms:[],categories:[],technologies:[]},mediaPhotos:[],options:{["demo-types"]:[],["store-categories"]:[],technologies:[],platforms:[]},loading:{submit:!1,fetch:!1}}},computed:{actionType(){return this.$route.params&&this.$route.params.actionType},slug(){return this.$route.params&&this.$route.params.slug},additionalOptions(){return{categories:this.options["store-categories"],technologies:this.options.technologies}}},validations(){return{form:{name:{required:r["required"],minLength:Object(r["minLength"])(3),maxLength:Object(r["maxLength"])(50)},main_media:{required:Object(r["requiredIf"])(()=>"create"===this.actionType)},description:{minWords:Object(s["d"])(3),maxWords:Object(s["c"])(500)},short_description:{minLength:Object(r["minLength"])(10),maxLength:Object(r["maxLength"])(150)}}}},created(){this.fetchOptions(),"edit"===this.actionType&&this.fetchProject()},methods:{fetchOptions(){Object.keys(this.options).forEach(t=>{Object(n["b"])({reqName:t}).then(e=>{this.options[t]="demo-types"===t||"platforms"===t?e.data.data.map(t=>{return{name:t.name,id:t.id}}):e.data.data})})},fetchProject(){this.loading.fetch=!0,Object(n["c"])({reqName:"projects",id:this.slug}).then(t=>{this.form=t.data.project})},onSubmit(){const t=l(this.form);this.loading.submit=!0,Object(n["d"])({reqName:"projects",data:t}).then(()=>{this.loading.submit=!1,this.$router.push({name:"Projects"})}).catch(()=>this.loading.submit=!1)},handleImgSelect(t){this.form.main_media=t.file,this.$v.form.main_media.$touch()},pushToTable(t,e,i){this.form[e].push(t);const a=this.options[i].findIndex(e=>e.id===t.id);this.options[i].splice(a,1)},removeFromTable(t,e,i,a){this.form[i].splice(e,1),this.options[a].push(t)}}},u=h,f=i("2877"),p=i("6544"),g=i.n(p),b=i("8336"),v=i("b0af"),_=i("99d9"),$=i("62ad"),w=i("a523"),y=i("4bd4"),j=i("0fd9"),x=i("8654"),O=i("a844"),T=Object(f["a"])(u,a,o,!1,null,null,null);e["default"]=T.exports;g()(T,{VBtn:b["a"],VCard:v["a"],VCardText:_["b"],VCardTitle:_["c"],VCol:$["a"],VContainer:w["a"],VForm:y["a"],VRow:j["a"],VTextField:x["a"],VTextarea:O["a"]})},9257:function(t,e,i){"use strict";e["a"]={data(){return{imgPreviewDialog:!1,currImg:""}},methods:{handleImgPreview(t){this.currImg=t,this.imgPreviewDialog=!0},closePreview(){this.imgPreviewDialog=!1}}}},ba06:function(t,e,i){"use strict";var a=i("2cc4");e["a"]={data(){return{locale:""}},computed:{currLocale(){return this.locale?this.locale:this.$store.getters.locale}},methods:{handleLocaleChange(t){this.loading.fetch=!0,Object(a["c"])({reqName:this.config.modelName,id:this.currItem[this.config.idType||"id"],locale:t}).then(e=>{this.locale=t,this.form=e.data[Object.keys(e.data)[0]],this.loading.fetch=!1}).catch(()=>this.loading.fetch=!1)}}}}}]);
//# sourceMappingURL=chunk-36e9662d.91d8974e.js.map