(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b82ab8b"],{"4bd4":function(t,e,i){"use strict";var o=i("58df"),a=i("7e2b"),s=i("3206");e["a"]=Object(o["a"])(a["a"],Object(s["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>{return t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0})},i={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=t.$watch("shouldValidate",o=>{o&&(this.errorBag.hasOwnProperty(t._uid)||(i.valid=e(t)))}):i.valid=e(t),i},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const i=this.watchers.find(t=>t._uid===e._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},7957:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"form-page"},[i("v-container",["edit"===t.actionType?i("locale-select",{attrs:{loading:t.loading.fetch},on:{change:t.handleLocaleChange}}):t._e(),i("form-wrapper",{attrs:{validator:t.$v.form}},[i("v-form",[i("v-card",[i("v-card-title",[t._v(t._s(t.$t("heading.main_info")))]),i("v-card-text",[i("v-container",{attrs:{fluid:""}},[i("v-row",[i("v-col",{attrs:{cols:"12",md:"6"}},[i("form-group",{attrs:{name:"name",attribute:"label.name"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.attrs;return[i("v-text-field",t._b({attrs:{outlined:"",label:t.$t("label.name")},on:{blur:function(e){return t.$v.form.name.$touch()}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}},"v-text-field",o,!1))]}}])})],1),i("v-col",{attrs:{cols:"12",md:"6"}},[i("form-group",{attrs:{name:"main_media",attribute:"label.main_media"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.attrs;return[i("new-image-upload",t._b({staticClass:"file-upload__image",attrs:{imgUrl:t.form.main_media&&t.form.main_media.path,imgId:t.form.main_media&&t.form.main_media.id,"max-size":2},on:{fileSelected:t.handleImgSelect}},"new-image-upload",o,!1))]}}])})],1),i("v-col",{attrs:{cols:"12"}},[i("form-group",{attrs:{name:"description",attribute:"label.description"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.attrs;return[i("v-textarea",t._b({attrs:{outlined:"","no-resize":"","auto-grow":"",label:t.$t("label.description")},on:{blur:function(e){return t.$v.form.description.$touch()}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"===typeof e?e.trim():e)},expression:"form.description"}},"v-textarea",o,!1))]}}])})],1),i("v-col",{attrs:{cols:"12"}},[i("form-group",{attrs:{name:"short_description",attribute:"label.short_description"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.attrs;return[i("v-textarea",t._b({attrs:{outlined:"","no-resize":"",rows:"3",label:t.$t("label.short_description")},on:{blur:function(e){return t.$v.form.short_description.$touch()}},model:{value:t.form.short_description,callback:function(e){t.$set(t.form,"short_description","string"===typeof e?e.trim():e)},expression:"form.short_description"}},"v-textarea",o,!1))]}}])})],1)],1)],1)],1)],1),i("media",{attrs:{photos:t.mediaPhotos},on:{ImgSelected:t.handleMediaSelected,ImgDeleted:t.handleMediaDeleted}}),i("demos",{attrs:{"demo-types":t.selectItems["demo-types"],"added-demos":t.form.demos},on:{AddDemo:t.pushToTable,DeleteDemo:t.removeFromTable}}),i("platforms",{attrs:{platforms:t.options.platforms,"added-platforms":t.form.platforms},on:{AddPlatform:t.pushToTable,DeletePlatform:t.removeFromTable}}),i("options",{attrs:{options:t.additionalOptions,"selected-items":t.selectedOptions},on:{categoriesUpdated:function(e){t.form.categories=e},technologiesUpdated:function(e){t.form.technologies=e}}}),i("div",{staticClass:"d-flex justify-center"},[i("v-btn",{staticClass:"primary my-5",attrs:{"x-large":"",disabled:t.$v.form.$invalid,loading:t.loading.submit},on:{click:t.onSubmit}},[t._v(t._s(t.$t("button.submit")))])],1)],1)],1)],1),i("global-image-preview",{attrs:{"image-path":t.currImg,"show-dialog":t.imgPreviewDialog},on:{closePreview:t.closePreview}})],1)},a=[],s=i("b5ae"),r=i("61f7"),n=i("2cc4"),d=i("2ef0");
//! worked & tested with:
const l=t=>{let e=new FormData;for(const i in t)Object(d["isEmpty"])(t[i])?t[i]instanceof File&&e.append(i,t[i]):t[i]instanceof Array?t[i].some(t=>"object"===typeof t&&!(t instanceof File))?t[i].forEach((t,o)=>{for(const a in t)e.append(`${i}[${o}][${a}]`,t[a])}):(t[i].some(t=>t instanceof File),t[i].forEach((t,o)=>e.append(`${i}[${o}]`,t))):e.append(i,t[i]);return e};var m=i("9257"),c={name:"CreateProject",components:{Demos:()=>i.e("chunk-2d21a37a").then(i.bind(null,"bb26")),Media:()=>i.e("chunk-2d0d05dc").then(i.bind(null,"6859")),Platforms:()=>i.e("chunk-2d0e64a9").then(i.bind(null,"97b7")),Options:()=>i.e("chunk-2d0e8f68").then(i.bind(null,"8c07"))},mixins:[m["a"]],data(){return{form:{name:"",description:"",short_description:"",main_media:null,photos:[],demos:[],platforms:[],categories:[],technologies:[]},mediaPhotos:[],addedItems:{photos:[],demos:[],platforms:[]},options:{["demo-types"]:[],["store-categories"]:[],technologies:[],platforms:[]},loading:{submit:!1,fetch:!1},locale:this.$store.getters.locale}},computed:{actionType(){return"edit"===this.$route.params.actionType?"edit":"create"},slug(){return this.$route.params&&this.$route.params.slug},additionalOptions(){return{categories:this.options["store-categories"],technologies:this.options.technologies}},selectedOptions(){return{categories:this.form.categories,technologies:this.form.technologies}},selectItems(){const t={["demo-types"]:this.form.demos.map(t=>t.id),platforms:this.form.demos.map(t=>t.id)},e={["demo-types"]:[],platforms:[]};return["demo-types","platforms"].forEach(i=>{this.options[i].forEach(o=>{!t[i].includes(o.id)&&e[i].push(o)})}),e}},validations(){return{form:{name:{required:s["required"],minLength:Object(s["minLength"])(3),maxLength:Object(s["maxLength"])(50)},main_media:{required:Object(s["requiredIf"])(()=>"create"===this.actionType)},description:{minWords:Object(r["d"])(3),maxWords:Object(r["c"])(500)},short_description:{minLength:Object(s["minLength"])(10),maxLength:Object(s["maxLength"])(150)}}}},created(){this.fetchOptions(),"edit"===this.actionType&&this.fetchProject()},methods:{fetchOptions(){Object.keys(this.options).forEach(t=>{Object(n["b"])({reqName:t}).then(e=>{this.options[t]="demo-types"===t||"platforms"===t?e.data.data.map(t=>{return{name:t.name,id:t.id}}):e.data.data})})},fetchProject(){this.loading.fetch=!0,Object(n["c"])({reqName:"projects",id:this.slug,locale:this.locale}).then(t=>{this.form=t.data.project,this.form.media.length>0&&(this.mediaPhotos=this.form.media),this.loading.fetch=!1}).catch(()=>{this.loading.fetch=!1})},onSubmit(){"create"===this.actionType?this.createProject():this.updateProject()},createProject(){this.addedItems.photos.length>0&&(this.form.photos=this.addedItems.photos);const t=l(this.form);this.loading.submit=!0,Object(n["d"])({reqName:"projects",data:t}).then(()=>{this.loading.submit=!1,this.$router.push({name:"Projects"})}).catch(()=>this.loading.submit=!1)},updateProject(){const t={...this.form};t.slug&&delete t.slug,t.main_media&&delete t.main_media,t.media&&delete t.media,t.photos=this.addedItems.photos,this.addedItems.demos.length>0?t.demos=this.addedItems.demos:delete t.demos;const e={categories:[],technologies:[]};for(const o in e)t[o].length>0&&"number"===typeof t[o][0]?(t[o].forEach(t=>{e[o].push(t)}),t[o]=e[o]):delete t[o];if(t.platforms.length>0){const e=t.platforms.map(t=>{return{id:t.id,url:t.url}});t.platforms=e}const i=l(t);i.append("_method","put"),i.append("locale",this.locale),this.loading.submit=!0,Object(n["e"])({reqName:"projects",data:i,id:this.slug,locale:this.locale}).then(()=>{this.loading.submit=!1,this.$router.push({name:"Projects"})}).catch(()=>{this.loading.submit=!1})},handleLocaleChange(t){this.locale=t,this.fetchProject()},handleImgSelect(t){this.form.main_media=t.file,this.$v.form.main_media.$touch()},pushToTable(t,e){this.form[e].push(t),this.addedItems[e].push(t)},removeFromTable(t,e,i,o){this.form[i].splice(e,1),this.options[o].push(t)},handleMediaSelected(t){this.addedItems.photos=t},handleMediaDeleted(t){this.mediaPhotos.splice(t,1)}}},h=c,u=i("2877"),p=i("6544"),f=i.n(p),g=i("8336"),b=i("b0af"),v=i("99d9"),_=i("62ad"),$=i("a523"),w=i("4bd4"),j=i("0fd9"),y=i("8654"),P=i("a844"),O=Object(u["a"])(h,o,a,!1,null,null,null);e["default"]=O.exports;f()(O,{VBtn:g["a"],VCard:b["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:_["a"],VContainer:$["a"],VForm:w["a"],VRow:j["a"],VTextField:y["a"],VTextarea:P["a"]})},9257:function(t,e,i){"use strict";e["a"]={data(){return{imgPreviewDialog:!1,currImg:""}},methods:{handleImgPreview(t){this.currImg=t,this.imgPreviewDialog=!0},closePreview(){this.imgPreviewDialog=!1}}}}}]);
//# sourceMappingURL=chunk-4b82ab8b.b92a4771.js.map