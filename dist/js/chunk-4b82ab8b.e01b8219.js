(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b82ab8b"],{"4bd4":function(t,e,o){"use strict";var i=o("58df"),a=o("7e2b"),s=o("3206");e["a"]=Object(i["a"])(a["a"],Object(s["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>{return t.$watch("hasError",e=>{this.$set(this.errorBag,t._uid,e)},{immediate:!0})},o={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?o.shouldValidate=t.$watch("shouldValidate",i=>{i&&(this.errorBag.hasOwnProperty(t._uid)||(o.valid=e(t)))}):o.valid=e(t),o},validate(){return 0===this.inputs.filter(t=>!t.validate(!0)).length},reset(){this.inputs.forEach(t=>t.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(t=>t.resetValidation()),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find(e=>e._uid===t._uid);if(!e)return;const o=this.watchers.find(t=>t._uid===e._uid);o&&(o.valid(),o.shouldValidate()),this.watchers=this.watchers.filter(t=>t._uid!==e._uid),this.inputs=this.inputs.filter(t=>t._uid!==e._uid),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},7957:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"form-page"},[o("v-container",["edit"===t.actionType?o("locale-select",{attrs:{loading:t.loading.fetch},on:{change:t.handleLocaleChange}}):t._e(),o("form-wrapper",{attrs:{validator:t.$v.form}},[o("v-form",[o("v-card",[o("v-card-title",[t._v(t._s(t.$t("heading.main_info")))]),o("v-card-text",[o("v-container",{attrs:{fluid:""}},[o("v-row",[o("v-col",{attrs:{cols:"12",md:"6"}},[o("form-group",{attrs:{name:"name"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.attrs;return[o("v-text-field",t._b({attrs:{outlined:"",label:t.$t("label.name")},on:{blur:function(e){return t.$v.form.name.$touch()}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}},"v-text-field",i,!1))]}}])})],1),o("v-col",{attrs:{cols:"12",md:"6"}},[o("form-group",{attrs:{name:"main_media"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.attrs;return[o("new-image-upload",t._b({staticClass:"file-upload__image",attrs:{imgUrl:t.form.main_media&&t.form.main_media.path,imgId:t.form.main_media&&t.form.main_media.id,"max-size":2},on:{fileSelected:t.handleImgSelect}},"new-image-upload",i,!1))]}}])})],1),o("v-col",{attrs:{cols:"12"}},[o("form-group",{attrs:{name:"description"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.attrs;return[o("v-textarea",t._b({attrs:{outlined:"","no-resize":"","auto-grow":"",label:t.$t("label.description")},on:{blur:function(e){return t.$v.form.description.$touch()}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"===typeof e?e.trim():e)},expression:"form.description"}},"v-textarea",i,!1))]}}])})],1),o("v-col",{attrs:{cols:"12"}},[o("form-group",{attrs:{name:"short_description"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.attrs;return[o("v-textarea",t._b({attrs:{outlined:"","no-resize":"",rows:"3",label:t.$t("label.short_description")},on:{blur:function(e){return t.$v.form.short_description.$touch()}},model:{value:t.form.short_description,callback:function(e){t.$set(t.form,"short_description","string"===typeof e?e.trim():e)},expression:"form.short_description"}},"v-textarea",i,!1))]}}])})],1)],1)],1)],1)],1),o("media",{attrs:{photos:t.mediaPhotos},on:{ImgSelected:t.handleMediaSelected,ImgDeleted:t.handleMediaDeleted}}),o("demos",{attrs:{"demo-types":t.selectItems["demo-types"],"added-demos":t.form.demos},on:{AddDemo:t.pushToTable,DeleteDemo:t.removeFromTable}}),o("platforms",{attrs:{platforms:t.options.platforms,"added-platforms":t.form.platforms},on:{AddPlatform:t.pushToTable,DeletePlatform:t.removeFromTable}}),o("options",{attrs:{options:t.additionalOptions,"selected-items":t.selectedOptions},on:{categoriesUpdated:function(e){t.form.categories=e},technologiesUpdated:function(e){t.form.technologies=e}}}),o("div",{staticClass:"d-flex justify-center"},[o("v-btn",{staticClass:"primary my-5",attrs:{"x-large":"",disabled:t.$v.form.$invalid,loading:t.loading.submit},on:{click:t.onSubmit}},[t._v(t._s(t.$t("button.submit")))])],1)],1)],1)],1),o("global-image-preview",{attrs:{"image-path":t.currImg,"show-dialog":t.imgPreviewDialog},on:{closePreview:t.closePreview}})],1)},a=[],s=o("b5ae"),r=o("61f7"),n=o("2cc4"),d=o("2ef0");
//! worked & tested with:
const l=t=>{let e=new FormData;for(const o in t)Object(d["isEmpty"])(t[o])?t[o]instanceof File&&e.append(o,t[o]):t[o]instanceof Array?t[o].some(t=>"object"===typeof t&&!(t instanceof File))?t[o].forEach((t,i)=>{for(const a in t)e.append(`${o}[${i}][${a}]`,t[a])}):(t[o].some(t=>t instanceof File),t[o].forEach((t,i)=>e.append(`${o}[${i}]`,t))):e.append(o,t[o]);return e};var m=o("9257"),c={name:"CreateProject",components:{Demos:()=>o.e("chunk-2d21a37a").then(o.bind(null,"bb26")),Media:()=>o.e("chunk-2d0d05dc").then(o.bind(null,"6859")),Platforms:()=>o.e("chunk-2d0e64a9").then(o.bind(null,"97b7")),Options:()=>o.e("chunk-2d0e8f68").then(o.bind(null,"8c07"))},mixins:[m["a"]],data(){return{form:{name:"",description:"",short_description:"",main_media:null,photos:[],demos:[],platforms:[],categories:[],technologies:[]},mediaPhotos:[],addedItems:{photos:[],demos:[],platforms:[]},options:{["demo-types"]:[],["store-categories"]:[],technologies:[],platforms:[]},loading:{submit:!1,fetch:!1},locale:this.$store.getters.locale}},computed:{actionType(){return"edit"===this.$route.params.actionType?"edit":"create"},slug(){return this.$route.params&&this.$route.params.slug},additionalOptions(){return{categories:this.options["store-categories"],technologies:this.options.technologies}},selectedOptions(){return{categories:this.form.categories,technologies:this.form.technologies}},selectItems(){const t={["demo-types"]:this.form.demos.map(t=>t.id),platforms:this.form.demos.map(t=>t.id)},e={["demo-types"]:[],platforms:[]};return["demo-types","platforms"].forEach(o=>{this.options[o].forEach(i=>{!t[o].includes(i.id)&&e[o].push(i)})}),e}},validations(){return{form:{name:{required:s["required"],minLength:Object(s["minLength"])(3),maxLength:Object(s["maxLength"])(50)},main_media:{required:Object(s["requiredIf"])(()=>"create"===this.actionType)},description:{minWords:Object(r["d"])(3),maxWords:Object(r["c"])(500)},short_description:{minLength:Object(s["minLength"])(10),maxLength:Object(s["maxLength"])(150)}}}},created(){this.fetchOptions(),"edit"===this.actionType&&this.fetchProject()},methods:{fetchOptions(){Object.keys(this.options).forEach(t=>{Object(n["b"])({reqName:t}).then(e=>{this.options[t]="demo-types"===t||"platforms"===t?e.data.data.map(t=>{return{name:t.name,id:t.id}}):e.data.data})})},fetchProject(){this.loading.fetch=!0,Object(n["c"])({reqName:"projects",id:this.slug,locale:this.locale}).then(t=>{this.form=t.data.project,this.form.media.length>0&&(this.mediaPhotos=this.form.media),this.loading.fetch=!1}).catch(()=>{this.loading.fetch=!1})},onSubmit(){"create"===this.actionType?this.createProject():this.updateProject()},createProject(){this.addedItems.photos.length>0&&(this.form.photos=this.addedItems.photos);const t=l(this.form);this.loading.submit=!0,Object(n["d"])({reqName:"projects",data:t}).then(()=>{this.loading.submit=!1,this.$router.push({name:"Projects"})}).catch(()=>this.loading.submit=!1)},updateProject(){const t={...this.form};t.slug&&delete t.slug,t.main_media&&delete t.main_media,t.media&&delete t.media,t.photos=this.addedItems.photos,this.addedItems.demos.length>0?t.demos=this.addedItems.demos:delete t.demos;const e={categories:[],technologies:[]};for(const i in e)t[i].length>0&&"number"===typeof t[i][0]?(t[i].forEach(t=>{e[i].push(t)}),t[i]=e[i]):delete t[i];if(t.platforms.length>0){const e=t.platforms.map(t=>{return{id:t.id,url:t.url}});t.platforms=e}const o=l(t);o.append("_method","put"),o.append("locale",this.locale),this.loading.submit=!0,Object(n["e"])({reqName:"projects",data:o,id:this.slug,locale:this.locale}).then(()=>{this.loading.submit=!1,this.$router.push({name:"Projects"})}).catch(()=>{this.loading.submit=!1})},handleLocaleChange(t){this.locale=t,this.fetchProject()},handleImgSelect(t){this.form.main_media=t.file,this.$v.form.main_media.$touch()},pushToTable(t,e){this.form[e].push(t),this.addedItems[e].push(t)},removeFromTable(t,e,o,i){this.form[o].splice(e,1),this.options[i].push(t)},handleMediaSelected(t){this.addedItems.photos=t},handleMediaDeleted(t){this.mediaPhotos.splice(t,1)}}},h=c,u=o("2877"),p=o("6544"),f=o.n(p),g=o("8336"),b=o("b0af"),v=o("99d9"),_=o("62ad"),$=o("a523"),w=o("4bd4"),j=o("0fd9"),y=o("8654"),P=o("a844"),O=Object(u["a"])(h,i,a,!1,null,null,null);e["default"]=O.exports;f()(O,{VBtn:g["a"],VCard:b["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:_["a"],VContainer:$["a"],VForm:w["a"],VRow:j["a"],VTextField:y["a"],VTextarea:P["a"]})},9257:function(t,e,o){"use strict";e["a"]={data(){return{imgPreviewDialog:!1,currImg:""}},methods:{handleImgPreview(t){this.currImg=t,this.imgPreviewDialog=!0},closePreview(){this.imgPreviewDialog=!1}}}}}]);
//# sourceMappingURL=chunk-4b82ab8b.e01b8219.js.map