(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63824d88"],{"4bd4":function(e,t,a){"use strict";var s=a("58df"),i=a("7e2b"),r=a("3206");t["a"]=Object(s["a"])(i["a"],Object(r["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>{return e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0})},a={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",s=>{s&&(this.errorBag.hasOwnProperty(e._uid)||(a.valid=t(e)))}):a.valid=t(e),a},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const a=this.watchers.find(e=>e._uid===t._uid);a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},be9a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v(e._s(e.$t("heading.events")))]),a("v-spacer"),a("v-btn",{staticClass:"primary",on:{click:e.handleOpenDialog}},[e._v(e._s(e.$t("button.create")))])],1),a("WrappingTable",{ref:"table_ref",attrs:{headersName:e.headers,pathName:"events"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item,i=t.index;return[a("td",[a("v-avatar",{attrs:{size:"50"}},[a("v-img",{staticClass:"hover-pointer",attrs:{"aspect-ratio":"1",src:s.main_image&&s.main_image.path},on:{click:function(t){return e.showImagePreview(s.main_image)}}})],1)],1),a("td",{staticClass:"pa-3"},[e._v("\n        "+e._s(s.serial)+"\n      ")]),a("td",[e._v(e._s(s.name))]),a("td",[e._v(e._s(s.event_date.date))]),a("td",[a("v-icon",{attrs:{small:"",title:"edit"},on:{click:function(t){return e.handleEdit(s,i)}}},[e._v("\n          mdi-pencil")]),a("v-icon",{attrs:{small:"",title:"delete"},on:{click:function(t){return e.handleDelete(s,i)}}},[e._v("\n          mdi-delete")])],1)]}}])}),a("GenericDialog",{ref:"dialog_ref",on:{dialog_closed:e.onDialogClose},scopedSlots:e._u([{key:"card-title",fn:function(){return[e._v(e._s(e.dialogTitle))]},proxy:!0},{key:"card-text",fn:function(){return[a("formWrapper",{attrs:{validator:e.$v.form}},[a("v-form",{on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[a("v-row",[e.isEdit?a("v-col",{attrs:{cols:"12"}},[a("locale-select",{on:{change:e.fireLocaleChange}})],1):e._e(),a("v-col",{attrs:{cols:"12"}},[a("span",[e._v(e._s(e.$t("title.image_rqeuired")))]),a("new-image-upload",{staticClass:"file-upload__image",attrs:{resetToggle:e.resetToggle,imgUrl:e.form.main_image&&e.form.main_image.path,imgId:e.form.main_image&&Number(e.form.main_image.id),maxSize:e.imageSize},on:{fileSelected:e.uploadPhoto,ImageUpdated:e.ImageUpdated}})],1),a("v-col",{attrs:{cols:"12"}},[a("form-group",{attrs:{name:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.attrs,i=t.listeners;return[a("v-text-field",e._g(e._b({attrs:{outlined:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}},"v-text-field",s,!1),i))]}}])}),a("form-group",{attrs:{name:"address"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.attrs,i=t.listeners;return[a("v-text-field",e._g(e._b({attrs:{outlined:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}},"v-text-field",s,!1),i))]}}])}),a("form-group",{attrs:{name:"url"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.attrs,i=t.listeners;return[a("v-text-field",e._g(e._b({attrs:{outlined:""},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}},"v-text-field",s,!1),i))]}}])}),a("small",[e._v(" "+e._s(e.$t("label.event_date")))]),a("form-group",{attrs:{name:"date",attribute:"fields.date"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.attrs,i=t.listeners;return[a("date-time-picker",{attrs:{listeners:i,"date-time":e.form.date,textFieldProps:Object.assign({},s,{outlined:!0}),label:e.$t("fields.date"),timeFormat:"HH:mm:ss",allowedDates:e.allowedDates,isEdit:e.isEdit},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date","string"===typeof t?t.trim():t)},expression:"form.date"}})]}}])}),a("v-row",[a("v-col",{attrs:{cols:"9"}},[a("form-group",{attrs:{name:"speakers"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.attrs,i=t.listeners;return[a("v-text-field",e._g(e._b({attrs:{outlined:""},model:{value:e.form.speakers,callback:function(t){e.$set(e.form,"speakers",t)},expression:"form.speakers"}},"v-text-field",s,!1),i))]}}])})],1),a("transition",{attrs:{name:"fade",mode:"out-in"}},[e.SpeakerField?a("v-col",{attrs:{cols:"3"}},[a("v-btn",{staticClass:"primary",attrs:{height:"55",large:""},on:{click:e.addSpeacker}},[e._v(e._s(e.$t("button.add_speaker")))])],1):e._e()],1),e.speakersList.length>0?a("v-col",{staticClass:"ma-0",attrs:{cols:"12"}},[a("section",{staticClass:"speakers-wrapper"},e._l(e.speakersList,(function(t,s){return a("v-chip",{key:s,staticClass:"mx-2",attrs:{close:""},on:{"click:close":function(t){return e.handleDeleteSpeacker(s)}}},[e._v(e._s(t))])})),1)]):e._e()],1),a("form-group",{attrs:{name:"description",attribute:"input.description"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.attrs,i=t.listeners;return[a("v-textarea",e._g(e._b({attrs:{outlined:"",rows:"10","no-resize":""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}},"v-textarea",s,!1),i))]}}])})],1),a("v-col",[a("v-btn",{staticClass:"primary",attrs:{loading:e.btnLoading,type:"submit",disabled:e.$v.form.$invalid||e.requiredFields}},[e._v(e._s(e.$t("button.save")))])],1)],1)],1)],1)]},proxy:!0}])}),a("global-image-preview",{attrs:{showDialog:e.imageOverlay,imagePath:e.currentPreviewImage&&e.currentPreviewImage},on:{closePreview:function(t){e.imageOverlay=!1}}})],1)},i=[],r=a("b5ae"),n=a("a78e"),o=a.n(n),l=a("61f7"),d=a("2cc4"),m={name:"Events",components:{GenericDialog:()=>a.e("chunk-f1eca5e6").then(a.bind(null,"376a")),DateTimePicker:()=>a.e("chunk-04de1d44").then(a.bind(null,"f921"))},data(){return{headers:["image","serial","name","date","configs"],btnLoading:!1,isEdit:!0,locale:o.a.get("language")||"en",form:{name:"",description:"",date:"",main_image:"",address:"",speakers:"",url:""},speakersList:[],imageSize:1.24,resetToggle:!1,imageOverlay:!1,menu:!1,eventIndex:""}},methods:{ImageUpdated(){this.$refs.table_ref.handleGetItems()},fireLocaleChange(e){this.locale=e,this.handleShowData(this.form.slug,e)},async handleShowData(e,t){const a=await Object(d["c"])({reqName:"events",id:e,locale:t}),{event:s}=a.data,{name:i,description:r,url:n,speakers:o,main_image:l,address:m,event_date:c}=s;this.form={name:i,description:r,url:n,main_image:l,date:this.$moment(c.date).format("YYYY-MM-DD HH:mm:ss"),address:m,slug:s.slug},this.speakersList=o},clearData(){this.$v.$reset(),this.isEdit=!0,this.resetToggle=!0,this.form={},this.speakersList=[]},async createEvent(e){try{const t=await Object(d["d"])({reqName:"events",data:e}),{event:a}=t.data;this.$refs.table_ref.items.push(a),this.clearData(),this.$refs.dialog_ref.toggleDialog()}catch(t){console.log(t)}finally{this.btnLoading=!1}},async editEvent(e,t){try{const a=await Object(d["e"])({reqName:"events",data:e,id:t}),{event:s}=a.data;this.onDialogClose(),this.$refs.table_ref.handleUpdateItems(s,this.eventIndex),this.$refs.dialog_ref.toggleDialog()}catch(a){console.log(a)}finally{this.btnLoading=!1}},handleSubmit(){const e="YYYY-MM-DD HH:mm:ss";this.btnLoading=!0;const t=new FormData;delete this.form.speakers,this.form.date=this.$moment(this.form.date).format(e),this.isEdit&&delete this.form.main_image,t.append("date",this.form.date),Object.keys(this.form).forEach(e=>t.append(e,this.form[e])),this.speakersList.length>0&&this.speakersList.forEach(e=>t.append("speakers[]",e)),this.isEdit?(t.append("locale",this.locale),t.append("_method","put"),this.editEvent(t,this.form.slug)):this.createEvent(t)},allowedDates(e){const t=new Date(e),a=Date.now();return t>a},handleDeleteSpeacker(e){this.$delete(this.speakersList,e)},addSpeacker(){this.speakersList.push(this.form.speakers),this.form.speakers="",this.$v.form.$reset()},uploadPhoto(e){this.form.main_image=e.file},onDialogClose(){this.clearData()},handleOpenDialog(){this.$refs.dialog_ref.toggleDialog(),this.resetToggle=!1,this.isEdit=!1},showImagePreview(e){e&&(this.currentPreviewImage=e.path,this.imageOverlay=!0)},handleEdit({slug:e},t){this.eventIndex=t,this.$refs.dialog_ref.toggleDialog(),this.resetToggle=!1,this.isEdit=!0,this.handleShowData(e)},handleDelete({slug:e},t){this.$refs.table_ref.handleDelete(e,t)}},computed:{dialogTitle(){return this.isEdit?this.$t("title.edit_event"):this.$t("title.Create_event")},requiredFields(){return""===this.form.main_image&&""===this.form.date},SpeakerField(){return!(!this.form.speakers||""===this.form.speakers||this.$v.form.speakers.$invalid)}},validations:{form:{name:{required:r["required"],minLength:Object(r["minLength"])(3),maxLength:Object(r["maxLength"])(100)},description:{required:r["required"],minLength:Object(r["minLength"])(3),maxWords:Object(l["d"])(255)},date:{required:r["required"]},main_image:{required:r["required"]},url:{url:r["url"]},address:{required:r["required"],minLength:Object(r["minLength"])(3),maxWords:Object(l["d"])(500)},speakers:{minLength:Object(r["minLength"])(3),maxLength:Object(r["maxLength"])(150)}}}},c=m,u=a("2877"),h=a("6544"),f=a.n(h),g=a("8212"),p=a("8336"),v=a("cc20"),_=a("62ad"),b=a("4bd4"),k=a("132d"),w=a("adda"),$=a("0fd9"),x=a("2fa4"),D=a("8654"),y=a("a844"),L=a("71d9"),E=a("2a7f"),O=Object(u["a"])(c,s,i,!1,null,"3c6f4975",null);t["default"]=O.exports;f()(O,{VAvatar:g["a"],VBtn:p["a"],VChip:v["a"],VCol:_["a"],VForm:b["a"],VIcon:k["a"],VImg:w["a"],VRow:$["a"],VSpacer:x["a"],VTextField:D["a"],VTextarea:y["a"],VToolbar:L["a"],VToolbarTitle:E["b"]})}}]);
//# sourceMappingURL=chunk-63824d88.31bdf1d2.js.map