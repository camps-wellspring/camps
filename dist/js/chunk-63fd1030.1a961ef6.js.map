{"version":3,"sources":["webpack:///./src/views/store/projects/action/index.vue?4896","webpack:///./src/helpers/deepFormData.js","webpack:///src/views/store/projects/action/index.vue","webpack:///./src/views/store/projects/action/index.vue?62f0","webpack:///./src/views/store/projects/action/index.vue","webpack:///./src/mixins/imgPreview.js","webpack:///./src/mixins/switchLocale.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","actionType","attrs","loading","fetch","on","handleLocaleChange","_e","$v","form","$event","preventDefault","onSubmit","_v","_s","$t","scopedSlots","_u","key","fn","ref","_b","name","$touch","model","value","callback","$$v","$set","expression","main_media","path","id","handleImgSelect","description","trim","short_description","mediaPhotos","photos","splice","options","demos","addDemo","deleteDemo","platforms","addPlatform","deletePlatform","additionalOptions","categories","technologies","$invalid","submit","currImg","imgPreviewDialog","closePreview","staticRenderFns","deepFormData","payload","FormData","el","File","append","Array","some","val","forEach","obj","i","prop","item","components","Demos","Media","Platforms","Options","mixins","switchLocale","imgPreview","computed","$route","params","slug","required","minLength","maxLength","minWords","maxWords","fetchOptions","fetchProject","methods","Object","keys","reqName","then","res","data","map","project","$router","push","catch","img","file","newDemo","demoTypeIndex","getIndexById","newPlatform","targetArr","component","VBtn","VCard","VCardText","VCardTitle","VCol","VContainer","VRow","VTextField","VTextarea","locale","$store","getters","config","modelName","currItem","idType"],"mappings":"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","file":"js/chunk-63fd1030.1a961ef6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-page\"},[_c('v-container',[(_vm.actionType === 'update')?_c('locale-select',{attrs:{\"loading\":_vm.loading.fetch},on:{\"change\":_vm.handleLocaleChange}}):_vm._e(),_c('form-wrapper',{attrs:{\"validator\":_vm.$v.form}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('v-card',[_c('v-card-title',[_vm._v(_vm._s(_vm.$t(\"heading.main_info\")))]),_c('v-card-text',[_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('form-group',{attrs:{\"name\":\"name\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nreturn [_c('v-text-field',_vm._b({attrs:{\"outlined\":\"\",\"label\":_vm.$t('label.name')},on:{\"blur\":function($event){return _vm.$v.form.name.$touch()}},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}},'v-text-field',attrs,false))]}}])})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('form-group',{attrs:{\"name\":\"main_media\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nreturn [_c('new-image-upload',_vm._b({staticClass:\"file-upload__image\",attrs:{\"imgUrl\":_vm.form.main_media && _vm.form.main_media.path,\"imgId\":_vm.form.main_media && _vm.form.main_media.id},on:{\"fileSelected\":_vm.handleImgSelect}},'new-image-upload',attrs,false))]}}])})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('form-group',{attrs:{\"name\":\"description\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nreturn [_c('v-textarea',_vm._b({attrs:{\"outlined\":\"\",\"no-resize\":\"\",\"auto-grow\":\"\",\"label\":_vm.$t('label.description')},on:{\"blur\":function($event){return _vm.$v.form.description.$touch()}},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.description\"}},'v-textarea',attrs,false))]}}])})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('form-group',{attrs:{\"name\":\"short_description\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nreturn [_c('v-textarea',_vm._b({attrs:{\"outlined\":\"\",\"no-resize\":\"\",\"rows\":\"3\",\"label\":_vm.$t('label.short_description')},on:{\"blur\":function($event){return _vm.$v.form.short_description.$touch()}},model:{value:(_vm.form.short_description),callback:function ($$v) {_vm.$set(_vm.form, \"short_description\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.short_description\"}},'v-textarea',attrs,false))]}}])})],1)],1)],1)],1)],1),_c('media',{attrs:{\"photos\":_vm.mediaPhotos},on:{\"ImgSelected\":function($event){_vm.form.photos = $event},\"ImgDeleted\":function($event){return _vm.form.photos.splice($event, 1)}}}),_c('demos',{attrs:{\"demo-types\":_vm.options['demo-types'],\"added-demos\":_vm.form.demos},on:{\"AddDemo\":_vm.addDemo,\"DeleteDemo\":_vm.deleteDemo}}),_c('platforms',{attrs:{\"platforms\":_vm.options.platforms,\"added-platforms\":_vm.form.platforms},on:{\"AddPlatform\":_vm.addPlatform,\"DeletePlatform\":_vm.deletePlatform}}),_c('options',{attrs:{\"options\":_vm.additionalOptions},on:{\"categoriesUpdated\":function($event){_vm.form.categories = $event},\"technologiesUpdated\":function($event){_vm.form.technologies = $event}}}),_c('v-btn',{staticClass:\"primary\",attrs:{\"type\":\"submit\",\"disabled\":_vm.$v.form.$invalid,\"loading\":_vm.loading.submit}},[_vm._v(_vm._s(_vm.$t(\"button.submit\")))])],1)])],1),_c('global-image-preview',{attrs:{\"image-path\":_vm.currImg,\"show-dialog\":_vm.imgPreviewDialog},on:{\"closePreview\":_vm.closePreview}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//* CONSTRUCTING A ONE-LEVEL-DEEP FORMDATA OBJECT FROM A GIVEN NORMAL OBJECT (form)\n//! works only with:\n//? flat arrays, arrays of flat objects\n//? arrays of flat objects\n//? arrays of flat objects that contain files\n//? files\n//? Strings\n//? Numbers\n\nimport { isEmpty } from \"lodash\";\n\nexport const deepFormData = form => {\n  let payload = new FormData();\n  for (const el in form) {\n    // if the property is not empty\n    if (!isEmpty(form[el])) {\n      // if the property is an array\n      if (form[el] instanceof Array) {\n        // if THAT array has at least one nested objects (typically used to detect an array of objects)\n        if (form[el].some(val => typeof val === \"object\")) {\n          // flattening each object in that array\n          form[el].forEach((obj, i) => {\n            for (const prop in obj) {\n              payload.append(`${el}[${i}][${prop}]`, obj[prop]);\n            }\n          });\n          // if it's a flat array\n        } else {\n          form[el].forEach((item, i) => payload.append(`${el}[${i}]`, item));\n        }\n        // if it's not an array\n      } else {\n        payload.append(el, form[el]);\n      }\n      // if it's just a single file\n    } else if (form[el] instanceof File) {\n      payload.append(el, form[el]);\n    }\n  }\n  return payload;\n};\n","<template>\n  <div class=\"form-page\">\n    <v-container>\n      <locale-select\n        v-if=\"actionType === 'update'\"\n        :loading=\"loading.fetch\"\n        @change=\"handleLocaleChange\"\n      />\n\n      <form-wrapper :validator=\"$v.form\">\n        <form @submit.prevent=\"onSubmit\">\n          <!-- MAIN INFO -->\n          <v-card>\n            <v-card-title>{{ $t(\"heading.main_info\") }}</v-card-title>\n            <v-card-text>\n              <v-container fluid>\n                <v-row>\n                  <v-col cols=\"12\" md=\"6\">\n                    <form-group name=\"name\">\n                      <template slot-scope=\"{ attrs }\">\n                        <v-text-field\n                          v-model=\"form.name\"\n                          v-bind=\"attrs\"\n                          outlined\n                          :label=\"$t('label.name')\"\n                          @blur=\"$v.form.name.$touch()\"\n                        ></v-text-field>\n                      </template>\n                    </form-group>\n                  </v-col>\n\n                  <v-col cols=\"12\" md=\"6\">\n                    <form-group name=\"main_media\">\n                      <template slot-scope=\"{ attrs }\">\n                        <new-image-upload\n                          class=\"file-upload__image\"\n                          :imgUrl=\"form.main_media && form.main_media.path\"\n                          :imgId=\"form.main_media && form.main_media.id\"\n                          @fileSelected=\"handleImgSelect\"\n                          v-bind=\"attrs\"\n                        />\n                      </template>\n                    </form-group>\n                  </v-col>\n\n                  <v-col cols=\"12\">\n                    <form-group name=\"description\">\n                      <template slot-scope=\"{ attrs }\">\n                        <v-textarea\n                          v-model.trim=\"form.description\"\n                          v-bind=\"attrs\"\n                          outlined\n                          no-resize\n                          auto-grow\n                          :label=\"$t('label.description')\"\n                          @blur=\"$v.form.description.$touch()\"\n                        ></v-textarea>\n                      </template>\n                    </form-group>\n                  </v-col>\n\n                  <v-col cols=\"12\">\n                    <form-group name=\"short_description\">\n                      <template slot-scope=\"{ attrs }\">\n                        <v-textarea\n                          v-model.trim=\"form.short_description\"\n                          v-bind=\"attrs\"\n                          outlined\n                          no-resize\n                          rows=\"3\"\n                          :label=\"$t('label.short_description')\"\n                          @blur=\"$v.form.short_description.$touch()\"\n                        ></v-textarea>\n                      </template>\n                    </form-group>\n                  </v-col>\n                </v-row>\n              </v-container>\n            </v-card-text>\n          </v-card>\n\n          <!-- MEDIA -->\n          <media\n            :photos=\"mediaPhotos\"\n            @ImgSelected=\"form.photos = $event\"\n            @ImgDeleted=\"form.photos.splice($event, 1)\"\n          />\n\n          <!-- DEMOS -->\n          <demos\n            :demo-types=\"options['demo-types']\"\n            :added-demos=\"form.demos\"\n            @AddDemo=\"addDemo\"\n            @DeleteDemo=\"deleteDemo\"\n          />\n\n          <!-- PLATFORMS -->\n          <platforms\n            :platforms=\"options.platforms\"\n            :added-platforms=\"form.platforms\"\n            @AddPlatform=\"addPlatform\"\n            @DeletePlatform=\"deletePlatform\"\n          />\n\n          <!-- CATEGORIES & TECHNOLOGIES -->\n          <options\n            :options=\"additionalOptions\"\n            @categoriesUpdated=\"form.categories = $event\"\n            @technologiesUpdated=\"form.technologies = $event\"\n          />\n\n          <v-btn\n            type=\"submit\"\n            class=\"primary\"\n            :disabled=\"$v.form.$invalid\"\n            :loading=\"loading.submit\"\n            >{{ $t(\"button.submit\") }}</v-btn\n          >\n        </form>\n      </form-wrapper>\n    </v-container>\n\n    <global-image-preview\n      :image-path=\"currImg\"\n      :show-dialog=\"imgPreviewDialog\"\n      @closePreview=\"closePreview\"\n    />\n  </div>\n</template>\n\n<script>\nimport { minLength, maxLength, required, requiredIf } from \"vuelidate/lib/validators\";\nimport { minWords, maxWords } from \"@/utils/validate\";\nimport switchLocale from \"@/mixins/switchLocale\";\nimport imgPreviewMixin from \"@/mixins/imgPreview\";\nimport { IndexData, StoreData, ShowData } from \"@/helpers/apiMethods\";\nimport { deepFormData } from \"@/helpers/deepFormData\";\n\nexport default {\n  name: \"CreateProject\",\n\n  components: {\n    Demos: () => import(\"./components/demos\"),\n    Media: () => import(\"./components/media\"),\n    Platforms: () => import(\"./components/platforms\"),\n    Options: () => import(\"./components/options\")\n  },\n\n  mixins: [switchLocale, imgPreviewMixin],\n\n  data() {\n    return {\n      form: {\n        name: \"\",\n        description: \"\",\n        short_description: \"\",\n        main_media: null,\n        photos: [],\n        demos: [],\n        platforms: [],\n        categories: [],\n        technologies: []\n      },\n      mediaPhotos: [],\n      options: {\n        [\"demo-types\"]: [],\n        [\"store-categories\"]: [],\n        technologies: [],\n        platforms: []\n      },\n      loading: {\n        submit: false,\n        fetch: false\n      }\n    };\n  },\n\n  computed: {\n    actionType() {\n      return this.$route.params && this.$route.params.actionType;\n    },\n\n    slug() {\n      return this.$route.params && this.$route.params.slug;\n    },\n\n    additionalOptions() {\n      return {\n        categories: this.options[\"store-categories\"],\n        technologies: this.options.technologies\n      };\n    }\n  },\n\n  validations() {\n    return {\n      form: {\n        name: {\n          required,\n          minLength: minLength(3),\n          maxLength: maxLength(50)\n        },\n        main_media: {\n          required: requiredIf(() => this.actionType === \"create\")\n        },\n        // TODO dynamically display min & max values in the message validation error message\n        description: {\n          minWords: minWords(3),\n          maxWords: maxWords(500)\n        },\n        short_description: {\n          minLength: minLength(10),\n          maxLength: maxLength(150)\n        }\n      }\n    };\n  },\n\n  created() {\n    this.fetchOptions();\n    this.actionType === \"edit\" && this.fetchProject();\n  },\n\n  methods: {\n    fetchOptions() {\n      Object.keys(this.options).forEach(el => {\n        IndexData({ reqName: el }).then(res => {\n          if (el === \"demo-types\" || el === \"platforms\") {\n            this.options[el] = res.data.data.map(item => {\n              return { name: item.name, id: item.id };\n            });\n          } else {\n            this.options[el] = res.data.data;\n          }\n        });\n      });\n    },\n\n    fetchProject() {\n      this.loading.fetch = true;\n      ShowData({ reqName: \"projects\", id: this.slug }).then(res => {\n        this.form = res.data.project;\n      });\n    },\n\n    onSubmit() {\n      const data = deepFormData(this.form);\n      this.loading.submit = true;\n      StoreData({ reqName: \"projects\", data })\n        .then(() => {\n          this.loading.submit = false;\n          this.$router.push({ name: \"Projects\" });\n        })\n        .catch(() => (this.loading.submit = false));\n    },\n\n    handleImgSelect(img) {\n      this.form.main_media = img.file;\n      this.$v.form.main_media.$touch();\n    },\n\n    addDemo(newDemo) {\n      this.form.demos.push(newDemo);\n      const demoTypeIndex = this.getIndexById(newDemo.id, this.options[\"demo-types\"]);\n      this.options[\"demo-types\"].splice(demoTypeIndex, 1);\n    },\n\n    addPlatform(newPlatform) {\n      this.form.platforms.push(newPlatform);\n      // FIXME handle splice properly\n      // const platformIndex = this.getIndexById(newPlatform.id, this.options.platforms);\n      // this.options.platforms.splice(platformIndex, 1);\n    },\n\n    deleteDemo(item, i) {\n      this.form.demos.splice(i, 1);\n      this.options[\"demo-types\"].push(item);\n    },\n\n    deletePlatform(item, i) {\n      this.form.platforms.splice(i, 1);\n      this.options.platforms.push(item);\n    },\n\n    getIndexById(id, targetArr) {\n      targetArr.forEach((el, i) => el.id === id && i);\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=25b408e0&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VCol,VContainer,VRow,VTextField,VTextarea})\n","export default {\n  data() {\n    return {\n      imgPreviewDialog: false,\n      currImg: \"\"\n    };\n  },\n\n  methods: {\n    handleImgPreview(path) {\n      this.currImg = path;\n      this.imgPreviewDialog = true;\n    },\n\n    closePreview() {\n      this.imgPreviewDialog = false;\n    }\n  }\n};\n","import { ShowData } from \"@/helpers/apiMethods\";\n\nexport default {\n  data() {\n    return {\n      locale: \"\"\n    };\n  },\n\n  computed: {\n    currLocale() {\n      return this.locale ? this.locale : this.$store.getters.locale;\n    }\n  },\n\n  methods: {\n    handleLocaleChange(locale) {\n      this.loading.fetch = true;\n      ShowData({\n        reqName: this.config.modelName,\n        id: this.currItem[this.config.idType || \"id\"],\n        locale\n      })\n        .then(res => {\n          this.locale = locale;\n          this.form = res.data[Object.keys(res.data)[0]];\n          this.loading.fetch = false;\n        })\n        .catch(() => (this.loading.fetch = false));\n    }\n  }\n};\n"],"sourceRoot":""}