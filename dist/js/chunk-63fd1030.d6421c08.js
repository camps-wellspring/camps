(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63fd1030"],{7957:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"form-page"},[o("v-container",["update"===t.actionType?o("locale-select",{attrs:{loading:t.loading.fetch},on:{change:t.handleLocaleChange}}):t._e(),o("form-wrapper",{attrs:{validator:t.$v.form}},[o("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("v-card",[o("v-card-title",[t._v(t._s(t.$t("heading.main_info")))]),o("v-card-text",[o("v-container",{attrs:{fluid:""}},[o("v-row",[o("v-col",{attrs:{cols:"12",md:"6"}},[o("form-group",{attrs:{name:"name"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs;return[o("v-text-field",t._b({attrs:{outlined:"",label:t.$t("label.name")},on:{blur:function(e){return t.$v.form.name.$touch()}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},"v-text-field",a,!1))]}}])})],1),o("v-col",{attrs:{cols:"12",md:"6"}},[o("form-group",{attrs:{name:"main_media"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs;return[o("new-image-upload",t._b({staticClass:"file-upload__image",attrs:{imgUrl:t.form.main_media&&t.form.main_media.path,imgId:t.form.main_media&&t.form.main_media.id},on:{fileSelected:t.handleImgSelect}},"new-image-upload",a,!1))]}}])})],1),o("v-col",{attrs:{cols:"12"}},[o("form-group",{attrs:{name:"description"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs;return[o("v-textarea",t._b({attrs:{outlined:"","no-resize":"","auto-grow":"",label:t.$t("label.description")},on:{blur:function(e){return t.$v.form.description.$touch()}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"===typeof e?e.trim():e)},expression:"form.description"}},"v-textarea",a,!1))]}}])})],1),o("v-col",{attrs:{cols:"12"}},[o("form-group",{attrs:{name:"short_description"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.attrs;return[o("v-textarea",t._b({attrs:{outlined:"","no-resize":"",rows:"3",label:t.$t("label.short_description")},on:{blur:function(e){return t.$v.form.short_description.$touch()}},model:{value:t.form.short_description,callback:function(e){t.$set(t.form,"short_description","string"===typeof e?e.trim():e)},expression:"form.short_description"}},"v-textarea",a,!1))]}}])})],1)],1)],1)],1)],1),o("media",{attrs:{photos:t.mediaPhotos},on:{ImgSelected:function(e){t.form.photos=e},ImgDeleted:function(e){return t.form.photos.splice(e,1)}}}),o("demos",{attrs:{"demo-types":t.options["demo-types"],"added-demos":t.form.demos},on:{AddDemo:t.addDemo,DeleteDemo:t.deleteDemo}}),o("platforms",{attrs:{platforms:t.options.platforms,"added-platforms":t.form.platforms},on:{AddPlatform:t.addPlatform,DeletePlatform:t.deletePlatform}}),o("options",{attrs:{options:t.additionalOptions},on:{categoriesUpdated:function(e){t.form.categories=e},technologiesUpdated:function(e){t.form.technologies=e}}}),o("v-btn",{staticClass:"primary",attrs:{type:"submit",disabled:t.$v.form.$invalid,loading:t.loading.submit}},[t._v(t._s(t.$t("button.submit")))])],1)])],1),o("global-image-preview",{attrs:{"image-path":t.currImg,"show-dialog":t.imgPreviewDialog},on:{closePreview:t.closePreview}})],1)},i=[],r=o("b5ae"),n=o("61f7"),s=o("ba06"),d=o("9257"),m=o("2cc4"),l=o("2ef0"),c={name:"CreateProject",components:{Demos:()=>o.e("chunk-2d21a37a").then(o.bind(null,"bb26")),Media:()=>o.e("chunk-2d0d05dc").then(o.bind(null,"6859")),Platforms:()=>o.e("chunk-2d0e64a9").then(o.bind(null,"97b7")),Options:()=>o.e("chunk-2d0e8f68").then(o.bind(null,"8c07"))},mixins:[s["a"],d["a"]],data(){return{form:{name:"",description:"",short_description:"",main_media:null,photos:[],demos:[],platforms:[],categories:[],technologies:[]},mediaPhotos:[],options:{["demo-types"]:[],["store-categories"]:[],technologies:[],platforms:[]},loading:{submit:!1,fetch:!1}}},computed:{actionType(){const t=this.$route.path.split("/"),e=t[t.length-1];return"create"===e?"create":"update"},additionalOptions(){return{categories:this.options["store-categories"],technologies:this.options.technologies}}},validations(){return{form:{name:{required:r["required"],minLength:Object(r["minLength"])(3),maxLength:Object(r["maxLength"])(50)},main_media:{required:Object(r["requiredIf"])(()=>"create"===this.actionType)},description:{minWords:Object(n["d"])(3),maxWords:Object(n["c"])(500)},short_description:{minLength:Object(r["minLength"])(10),maxLength:Object(r["maxLength"])(150)}}}},created(){this.fetchOptions()},methods:{fetchOptions(){Object.keys(this.options).forEach(t=>{Object(m["b"])({reqName:t}).then(e=>{this.options[t]="demo-types"===t||"platforms"===t?e.data.data.map(t=>{return{name:t.name,id:t.id}}):e.data.data})})},onSubmit(){let t=new FormData;for(const e in this.form)this.form[e]instanceof File&&t.append(e,this.form[e]),!Object(l["isEmpty"])(this.form[e])&&t.append(e,this.form[e]);this.loading.submit=!0,Object(m["d"])({reqName:"projects",data:t}).then(()=>{this.loading.submit=!1,this.$router.push({name:"Projects"})})},handleImgSelect(t){this.form.main_media=t.file,this.$v.form.main_media.$touch()},addDemo(t){this.form.demos.push(t);const e=this.getIndexById(t.id,this.options["demo-types"]);this.options["demo-types"].splice(e,1)},addPlatform(t){this.form.platforms.push(t)},deleteDemo(t,e){this.form.demos.splice(e,1),this.options["demo-types"].push(t)},deletePlatform(t,e){this.form.platforms.splice(e,1),this.options.platforms.push(t)},getIndexById(t,e){e.forEach((e,o)=>e.id===t&&o)}}},f=c,h=o("2877"),p=o("6544"),u=o.n(p),g=o("8336"),b=o("b0af"),v=o("99d9"),_=o("62ad"),w=o("a523"),y=o("0fd9"),$=o("8654"),x=o("a844"),O=Object(h["a"])(f,a,i,!1,null,null,null);e["default"]=O.exports;u()(O,{VBtn:g["a"],VCard:b["a"],VCardText:v["b"],VCardTitle:v["c"],VCol:_["a"],VContainer:w["a"],VRow:y["a"],VTextField:$["a"],VTextarea:x["a"]})},9257:function(t,e,o){"use strict";e["a"]={data(){return{imgPreviewDialog:!1,currImg:""}},methods:{handleImgPreview(t){this.currImg=t,this.imgPreviewDialog=!0},closePreview(){this.imgPreviewDialog=!1}}}},ba06:function(t,e,o){"use strict";var a=o("2cc4");e["a"]={data(){return{locale:""}},computed:{currLocale(){return this.locale?this.locale:this.$store.getters.locale}},methods:{handleLocaleChange(t){this.loading.fetch=!0,Object(a["c"])({reqName:this.config.modelName,id:this.currItem[this.config.idType||"id"],locale:t}).then(e=>{this.locale=t,this.form=e.data[Object.keys(e.data)[0]],this.loading.fetch=!1}).catch(()=>this.loading.fetch=!1)}}}}}]);
//# sourceMappingURL=chunk-63fd1030.d6421c08.js.map