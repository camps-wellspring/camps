{"version":3,"sources":["webpack:///./src/views/demo-types/components/action/index.vue?c56f","webpack:///src/views/demo-types/components/action/index.vue","webpack:///./src/views/demo-types/components/action/index.vue?6f6f","webpack:///./src/views/demo-types/components/action/index.vue","webpack:///./src/mixins/switchLocale.js","webpack:///./src/mixins/actionMixin.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","actionType","attrs","loading","fetch","on","handleLocaleChange","_e","$v","form","$event","preventDefault","onSubmit","scopedSlots","_u","key","fn","ref","_b","$t","name","$touch","model","value","callback","$$v","$set","expression","config","imgType","staticClass","path","id","handleImg","imgUpdated","$invalid","submit","_v","_s","staticRenderFns","mixins","actionMixin","required","minLength","maxLength","component","VBtn","VCol","VContainer","VRow","VTextField","locale","computed","$store","getters","methods","reqName","modelName","currItem","idType","then","res","data","Object","keys","catch","switchLocale","props","type","default","String","dialog","Boolean","watch","immediate","deep","window","eventBus","$on","reset","update","closeDialog","create","Promise","resolve","payload","el","currLocale","_method","itemId","FormData","append","img","file","$emit"],"mappings":"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","file":"js/chunk-690fc554.66f935ca.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[(_vm.actionType === 'update')?_c('locale-select',{attrs:{\"loading\":_vm.loading.fetch},on:{\"change\":_vm.handleLocaleChange}}):_vm._e(),_c('form-wrapper',{attrs:{\"validator\":_vm.$v.form}},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('form-group',{attrs:{\"name\":\"name\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nreturn [_c('v-text-field',_vm._b({attrs:{\"outlined\":\"\",\"label\":_vm.$t('label.name')},on:{\"blur\":function($event){return _vm.$v.form.name.$touch()}},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}},'v-text-field',attrs,false))]}}])})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"6\"}},[_c('form-group',{attrs:{\"name\":_vm.config.imgType},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar attrs = ref.attrs;\nreturn [_c('new-image-upload',_vm._b({staticClass:\"file-upload__image\",attrs:{\"imgUrl\":_vm.form[_vm.config.imgType] && _vm.form[_vm.config.imgType].path,\"imgId\":_vm.form[_vm.config.imgType] && _vm.form[_vm.config.imgType].id,\"max-size\":2},on:{\"fileSelected\":_vm.handleImg,\"ImageUpdated\":function($event){_vm.imgUpdated = true}}},'new-image-upload',attrs,false))]}}])})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{staticClass:\"primary\",attrs:{\"type\":\"submit\",\"disabled\":_vm.$v.form.$invalid,\"loading\":_vm.loading.submit}},[_vm._v(_vm._s(_vm.$t(\"button.submit\")))])],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container>\n    <locale-select\n      v-if=\"actionType === 'update'\"\n      :loading=\"loading.fetch\"\n      @change=\"handleLocaleChange\"\n    />\n\n    <form-wrapper :validator=\"$v.form\">\n      <form @submit.prevent=\"onSubmit\">\n        <v-row>\n          <v-col cols=\"12\" md=\"6\">\n            <form-group name=\"name\">\n              <template slot-scope=\"{ attrs }\">\n                <v-text-field\n                  v-model=\"form.name\"\n                  v-bind=\"attrs\"\n                  outlined\n                  :label=\"$t('label.name')\"\n                  @blur=\"$v.form.name.$touch()\"\n                ></v-text-field>\n              </template>\n            </form-group>\n          </v-col>\n\n          <v-col cols=\"12\" md=\"6\">\n            <form-group :name=\"config.imgType\">\n              <template slot-scope=\"{ attrs }\">\n                <new-image-upload\n                  class=\"file-upload__image\"\n                  :imgUrl=\"form[config.imgType] && form[config.imgType].path\"\n                  :imgId=\"form[config.imgType] && form[config.imgType].id\"\n                  :max-size=\"2\"\n                  @fileSelected=\"handleImg\"\n                  @ImageUpdated=\"imgUpdated = true\"\n                  v-bind=\"attrs\"\n                />\n              </template>\n            </form-group>\n          </v-col>\n\n          <v-col cols=\"12\">\n            <v-btn\n              type=\"submit\"\n              class=\"primary\"\n              :disabled=\"$v.form.$invalid\"\n              :loading=\"loading.submit\"\n              >{{ $t(\"button.submit\") }}</v-btn\n            >\n          </v-col>\n        </v-row>\n      </form>\n    </form-wrapper>\n  </v-container>\n</template>\n\n<script>\nimport { minLength, maxLength, required, requiredIf } from \"vuelidate/lib/validators\";\nimport actionMixin from \"@/mixins/actionMixin\";\n\nexport default {\n  mixins: [actionMixin],\n\n  validations() {\n    return {\n      form: {\n        name: {\n          required,\n          minLength: minLength(3),\n          maxLength: maxLength(40)\n        },\n        [this.config.imgType]: {\n          required: requiredIf(() => this.actionType === \"create\")\n        }\n      }\n    };\n  }\n};\n</script>\n","import mod from \"-!../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/vuetify-loader/lib/loader.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0264a86b&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCol,VContainer,VRow,VTextField})\n","import { ShowData } from \"@/helpers/apiMethods\";\n\nexport default {\n  data() {\n    return {\n      locale: \"\"\n    };\n  },\n\n  computed: {\n    currLocale() {\n      return this.locale ? this.locale : this.$store.getters.locale;\n    }\n  },\n\n  methods: {\n    handleLocaleChange(locale) {\n      this.loading.fetch = true;\n      ShowData({\n        reqName: this.config.modelName,\n        id: this.currItem[this.config.idType || \"id\"],\n        locale\n      })\n        .then(res => {\n          this.locale = locale;\n          this.form = res.data[Object.keys(res.data)[0]];\n          this.loading.fetch = false;\n        })\n        .catch(() => (this.loading.fetch = false));\n    }\n  }\n};\n","import { UpdateData, StoreData } from \"@/helpers/apiMethods\";\nimport switchLocale from \"@/mixins/switchLocale\";\n\nexport default {\n  mixins: [switchLocale],\n\n  props: {\n    currItem: {\n      type: Object,\n      default: () => {}\n    },\n    config: {\n      type: Object,\n      default: () => {}\n    },\n    actionType: {\n      type: String,\n      default: \"\"\n    },\n    dialog: {\n      type: Boolean,\n      default: \"\"\n    }\n  },\n\n  data() {\n    return {\n      imgUpdated: true,\n      form: {},\n      loading: {\n        submit: false,\n        fetch: false\n      }\n    };\n  },\n\n  computed: {\n    itemId() {\n      return this.config.idType ? this.config.idType : \"id\";\n    }\n  },\n\n  watch: {\n    currItem: {\n      handler(value) {\n        this.form = { ...value };\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n\n  mounted() {\n    window.eventBus.$on(\"SET_DIALOG\", value => {\n      if (!value) {\n        this.reset();\n      }\n    });\n  },\n\n  methods: {\n    onSubmit() {\n      if (this.actionType === \"update\") {\n        this.update().then(() => this.imgUpdated && this.closeDialog());\n      } else {\n        this.create().then(() => this.closeDialog());\n      }\n    },\n\n    update() {\n      return new Promise(resolve => {\n        this.loading.submit = true;\n        let payload = {};\n        for (const el in this.form) {\n          this.form[el] && (payload[el] = this.form[el]);\n        }\n        payload.locale = this.currLocale;\n        payload._method = \"put\";\n        UpdateData({\n          reqName: this.config.modelName,\n          data: payload,\n          id: this.currItem[this.itemId]\n        })\n          .then(() => {\n            this.loading.submit = false;\n            resolve();\n          })\n          .catch(() => (this.loading.submit = false));\n      });\n    },\n\n    create() {\n      return new Promise(resolve => {\n        this.loading.submit = true;\n        let payload = new FormData();\n        for (const el in this.form) {\n          payload.append(el, this.form[el]);\n        }\n        StoreData({\n          reqName: this.config.modelName,\n          data: payload\n        })\n          .then(() => {\n            this.loading.submit = false;\n            resolve();\n          })\n          .catch(() => (this.loading.submit = false));\n      });\n    },\n\n    handleImg(img) {\n      this.form[this.config.imgType] = img.file;\n      this.imgUpdated = false;\n      this.$v.form[this.config.imgType].$touch();\n    },\n\n    closeDialog() {\n      this.reset();\n      this.$emit(\"closed\");\n    },\n\n    reset() {\n      this.form = {};\n      this.locale = this.$store.getters.locale;\n    }\n  }\n};\n"],"sourceRoot":""}