(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75296d13"],{"4bd4":function(e,t,i){"use strict";var a=i("58df"),s=i("7e2b"),r=i("3206");t["a"]=Object(a["a"])(s["a"],Object(r["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>{return e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0})},i={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=e.$watch("shouldValidate",a=>{a&&(this.errorBag.hasOwnProperty(e._uid)||(i.valid=t(e)))}):i.valid=t(e),i},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const i=this.watchers.find(e=>e._uid===t._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},d09a:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("v-card",[i("v-card-title",[e._v("\n      "+e._s(e.editMode?e.$t("title.edit_service"):e.$t("title.create_service"))+"\n    ")]),i("v-divider"),i("v-card-text",[e.editMode?i("v-row",{attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"6"}},[i("locale-select",{on:{change:e.fireLocaleChange}})],1)],1):e._e(),i("v-form",[i("form-wrapper",{attrs:{validator:e.$v.service}},[i("v-row",[i("v-col",{attrs:{md:"4",cols:"12"}},[i("form-group",{attrs:{name:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs;return[i("v-text-field",e._b({attrs:{label:e.$t("label.name"),outlined:""},on:{blur:function(t){return e.$v.service.name.$touch()}},model:{value:e.service.name,callback:function(t){e.$set(e.service,"name",t)},expression:"service.name"}},"v-text-field",a,!1))]}}])})],1),i("v-col",{attrs:{md:"4",cols:"12"}},[i("form-group",{attrs:{name:"priority"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs;return[i("v-text-field",e._b({attrs:{label:e.$t("label.priority"),type:"number",outlined:""},on:{blur:function(t){return e.$v.service.priority.$touch()}},model:{value:e.service.priority,callback:function(t){e.$set(e.service,"priority",t)},expression:"service.priority"}},"v-text-field",a,!1))]}}])})],1),i("v-col",{attrs:{md:"4",cols:"12"}},[i("new-image-upload",{staticClass:"file-upload__image",attrs:{imgUrl:e.service.main_image?e.service.main_image.path:"",imgId:e.service.main_image?e.service.main_image.id:null},on:{fileSelected:e.handleUploadMainImage}})],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("form-group",{attrs:{name:"short_description"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs;return[i("v-textarea",e._b({attrs:{label:e.$t("label.short_description"),rows:5,outlined:""},on:{blur:function(t){return e.$v.service.short_description.$touch()}},model:{value:e.service.short_description,callback:function(t){e.$set(e.service,"short_description",t)},expression:"service.short_description"}},"v-textarea",a,!1))]}}])})],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("form-group",{attrs:{name:"description"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs;return[i("v-textarea",e._b({attrs:{label:e.$t("label.description"),rows:5,outlined:""},on:{blur:function(t){return e.$v.service.description.$touch()}},model:{value:e.service.description,callback:function(t){e.$set(e.service,"description",t)},expression:"service.description"}},"v-textarea",a,!1))]}}])})],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("multi-image-upload",{attrs:{maxSize:e.photosMaxSize,imgsUrl:e.getPhotos()},on:{fileSelected:e.setPhotos,handle_delete_image:e.handleDeletePhoto}})],1)],1)],1)],1)],1),i("v-divider",{staticClass:"mx-4"}),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"mt-2 mb-1",attrs:{color:"primary",disabled:e.$v.$invalid,loading:e.loading.save},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("button.save"))+"\n      ")]),i("v-spacer")],1)],1)],1)},s=[],r=i("b5ae"),o=i("2cc4"),n=i("a78e"),c=i.n(n),l={name:"handle-service",mounted(){"new"!==this.$route.params.slug&&(this.editMode=!0,this.getServiceData())},data(){return{editMode:!1,service:{name:"",priority:null,short_description:"",description:"",main_image:{}},locale:c.a.get("language"),loading:{save:!1,media:!1,main:!1},photos:[],media:[],photosMaxSize:1.024}},methods:{getServiceData(){Object(o["c"])({reqName:"services",id:this.$route.params.slug,locale:this.locale}).then(e=>{const{service:t}=e.data;Object.keys(this.service).forEach(e=>{this.service[e]=t[e]}),this.media=[...t.media]}).catch(e=>{console.log(e)})},fireLocaleChange(e){this.locale=e,this.getServiceData()},handleUploadMainImage(e){this.service.main_image=e.file},setPhotos(e){this.photos=e},getPhotos(){if(this.media)return this.media},handleDeletePhoto(e){this.media.splice(e,1)},save(){this.loading.save=!0,this.editMode?this.UpdateService():this.StoreService()},StoreService(){let e=new FormData;Object.keys(this.service).forEach(t=>{e.append(t,this.service[t])}),this.photos.length&&this.photos.forEach((t,i)=>{e.append(`photos[${i}]`,t)}),Object(o["d"])({reqName:"services",data:e}).then(()=>{this.popUp(this.$t("message.services_should_have_subs"),"info",!0).then(e=>{e.dismiss||(this.$router.push({name:"ServicesList"}),this.loading.save=!1)})}).catch(e=>{console.log(e),this.loading.save=!1})},UpdateService(){let e=new FormData;Object.keys(this.service).forEach(t=>{"main_image"!=t&&e.append(t,this.service[t])}),this.photos.length&&this.photos.forEach((t,i)=>{e.append(`photos[${i}]`,t)}),e.append("_method","PUT"),e.append("locale",this.locale),this.loading.main=!0,Object(o["e"])({reqName:"services",id:this.$route.params.slug,data:e}).then(()=>{this.loading.media||(this.$router.push({name:"ServicesList"}),this.loading.save=!1),this.loading.main=!1}).catch(e=>{console.log(e),this.loading.save=!1})}},validations(){return{service:{name:{required:r["required"],minLength:Object(r["minLength"])(3),maxLength:Object(r["maxLength"])(50)},priority:{required:r["required"]},short_description:{required:r["required"],minLength:Object(r["minLength"])(3)},description:{required:r["required"],minLength:Object(r["minLength"])(3)}}}}},d=l,h=i("2877"),u=i("6544"),v=i.n(u),m=i("8336"),p=i("b0af"),g=i("99d9"),f=i("62ad"),_=i("ce7e"),b=i("4bd4"),$=i("0fd9"),w=i("2fa4"),x=i("8654"),y=i("a844"),S=Object(h["a"])(d,a,s,!1,null,null,null);t["default"]=S.exports;v()(S,{VBtn:m["a"],VCard:p["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:g["c"],VCol:f["a"],VDivider:_["a"],VForm:b["a"],VRow:$["a"],VSpacer:w["a"],VTextField:x["a"],VTextarea:y["a"]})}}]);
//# sourceMappingURL=chunk-75296d13.19dad65d.js.map