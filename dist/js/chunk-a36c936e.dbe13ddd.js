(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a36c936e"],{"34c2":function(t,e,a){t.exports=a.p+"img/pdf-icon.50434788.png"},"371a":function(t,e,a){"use strict";var i=a("a40b"),n=a.n(i);n.a},7272:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main",[i("v-toolbar",{staticClass:"mb-4",attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[t._v(t._s(t.$t("heading.contacts")))]),i("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}})],1),i("v-data-table",{attrs:{headers:t.headers,items:t.items,"hide-default-footer":"","items-per-page":20,loading:t.tableLoading},scopedSlots:t._u([{key:"item",fn:function(e){var a=e.item,n=e.index;return[i("tr",[i("td",[t._v(t._s(a.user_name))]),i("td",[t._v(t._s(a.user_email))]),i("td",[t._v(t._s(a.user_phone))]),i("td",{attrs:{title:a.message}},[t._v(t._s(t._f("truncate")(a.message)))]),i("td",[i("v-chip",{class:t.changeStyle(a.status)},[t._v(t._s(t.getStatus(a.status)))])],1),i("td",[i("v-icon",{attrs:{medium:"",title:"edit"},on:{click:function(e){return t.handleEdit(a,n)}}},[t._v("mdi-pencil")]),i("v-icon",{attrs:{medium:"",title:"delete"},on:{click:function(e){return t.handleDelete(a,n)}}},[t._v("mdi-delete")]),i("v-icon",{attrs:{medium:"",title:"attachment"},on:{click:function(e){return t.showAttachments(a)}}},[t._v("mdi-attachment")])],1)])]}}])}),i("div",{staticClass:"text-xs-center mt-4"},[t.items.length>0&&t.pagination.last_page>1?i("v-pagination",{attrs:{length:t.pagination.last_page,"total-visible":10},on:{input:t.handlePagination},model:{value:t.pagination.current_page,callback:function(e){t.$set(t.pagination,"current_page",e)},expression:"pagination.current_page"}}):t._e()],1),i("global-image-preview",{attrs:{showDialog:t.imageOverlay,imagePath:t.currentPreviewImage},on:{closePreview:function(e){t.imageOverlay=!1}}}),i("DialogComponent",{scopedSlots:t._u([{key:"heading",fn:function(){return[i("v-card-title",[t._v(t._s(t.$t("heading.edit")))])]},proxy:!0},{key:"body",fn:function(){return[i("FormComponent",{attrs:{id:t.id,isEdited:t.isEdited},on:{click:function(e){t.dialog=!1},close_dialog:function(e){t.dialog=!1},toggleEdit:function(e){t.isEdit=!1},set_edite:t.UpdateContacts}})]},proxy:!0}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}}),i("DialogComponent",{scopedSlots:t._u([{key:"heading",fn:function(){return[i("v-card-title",[t._v(t._s(t.$t("heading.attachments")))])]},proxy:!0},{key:"body",fn:function(){return[i("v-row",[t._l(t.photos,(function(t){return i("v-col",{key:t.id,attrs:{cols:"12",md:"3"}},[i("v-img",{attrs:{title:"photo",fluid:"","aspect-ratio":"1",src:t&&t.path}})],1)})),t._l(t.pdfFiles,(function(t){return i("v-col",{key:t.id,attrs:{cols:"12",md:"3"}},[i("a",{attrs:{href:t.path,target:"_blank"}},[i("v-img",{attrs:{title:"pdf",fluid:"","aspect-ratio":"1",src:a("34c2")}})],1)])}))],2)]},proxy:!0}]),model:{value:t.anotherDialog,callback:function(e){t.anotherDialog=e},expression:"anotherDialog"}})],1)},n=[],s=a("297e"),o=a("2cc4"),r=a("2ef0"),l={name:"Contacts",components:{FormComponent:()=>a.e("chunk-2d21b2b9").then(a.bind(null,"bf43"))},data(){return{headers:[],items:[],tableLoading:!0,pagination:{},queries:{},imageOverlay:!1,currentPreviewImage:"",dialog:!1,id:"",contactIndex:"",isEdited:!1,photos:[],pdfFiles:[],anotherDialog:!1}},mounted(){this.handleCreateHeaders(),this.handleGetContacts()},methods:{changeStyle(t){return 0===t?"pending":1===t?"seen":2===t?"closed":void 0},getStatus(t){switch(t){case 0:return this.$t("label.pending");case 1:return this.$t("label.seen");case 2:return this.statusClass="closed",this.$t("label.closed");default:return""}},showAttachments({attachments:t}){this.anotherDialog=!this.anotherDialog,t.map(t=>{"photo"===t.type?this.photos.push(t):"file"===t.type&&this.pdfFiles.push(t)})},showImagePreview(t){t&&(this.currentPreviewImage=t.path,this.imageOverlay=!0)},handlePagination(t){this.queries={...this.queries,page:t},Object(r["isEqual"])(this.queries,this.$route.query)||this.$router.push({query:this.queries})},handleCreateHeaders(){const t=["name","email","phone","messages","status","configs"];this.headers=Object(s["a"])(t)},handleGetContacts(t){Object(o["b"])({reqName:"contact-messages",query:t}).then(t=>{this.tableLoading=!1;const{data:e,meta:a}=t.data;this.pagination=a,this.items=e,console.log(e)}).catch(t=>console.log(t))},handleDelete({id:t},e){this.popUp().then(a=>{a.dismiss||Object(o["a"])({reqName:"contact-messages",id:t}).then(()=>{this.$delete(this.items,e)}).catch(t=>console.log(t))})},handleEdit({id:t},e){this.dialog=!0,this.contactIndex=e,this.isEdited=!0,this.id=t},UpdateContacts(t){console.log(t),this.$set(this.items,this.contactIndex,t)}},watch:{$route:{handler({query:t}){this.queries=t,this.handleGetContacts(this.queries)},immediate:!0},dialog:{handler(t){t||(this.isEdited=!1,this.handleGetContacts(this.queries))},immediate:!0},anotherDialog:{handler(t){t||(this.photos=[],this.pdfFiles=[])},immediate:!0}}},d=l,c=(a("371a"),a("2877")),h=a("6544"),u=a.n(h),g=a("99d9"),m=a("cc20"),p=a("62ad"),f=a("8fea"),v=a("ce7e"),_=a("132d"),b=a("adda"),y=a("891e"),w=a("0fd9"),C=a("71d9"),k=a("2a7f"),x=Object(c["a"])(d,i,n,!1,null,"3d19da5c",null);e["default"]=x.exports;u()(x,{VCardTitle:g["c"],VChip:m["a"],VCol:p["a"],VDataTable:f["a"],VDivider:v["a"],VIcon:_["a"],VImg:b["a"],VPagination:y["a"],VRow:w["a"],VToolbar:C["a"],VToolbarTitle:k["b"]})},a40b:function(t,e,a){}}]);
//# sourceMappingURL=chunk-a36c936e.dbe13ddd.js.map