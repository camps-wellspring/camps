(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ab0edddc"],{"4bd4":function(e,t,a){"use strict";var i=a("58df"),r=a("7e2b"),s=a("3206");t["a"]=Object(i["a"])(r["a"],Object(s["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>{return e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0})},a={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=e.$watch("shouldValidate",i=>{i&&(this.errorBag.hasOwnProperty(e._uid)||(a.valid=t(e)))}):a.valid=t(e),a},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const a=this.watchers.find(e=>e._uid===t._uid);a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},"5aaa":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",[i("global-toolbar",{attrs:{title:"extra_services",actionButton:!0},on:{ButtonClicked:function(t){e.showExtraServiceDialog=!0}}}),i("v-data-table",{attrs:{headers:e.headers,items:e.extraServices,"hide-default-footer":"",loading:e.tableLoading},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item,s=t.index;return[i("tr",[i("td",[i("v-avatar",{attrs:{size:"40",color:"grey"}},[r.icon?i("img",{staticClass:"hover-pointer",attrs:{src:r.icon.path,title:e.$t("label.preview"),alt:e.$t("label.extra_service_icon")},on:{click:function(t){return e.showImagePreview(r.icon)}}}):i("img",{attrs:{src:a("9ace"),title:e.$t("label.no_photo"),alt:e.$t("label.extra_service_icon")}})])],1),i("td",[e._v(e._s(r.name))]),i("td",{staticClass:"toggle-adjust"},[i("toggle-service",{attrs:{"is-edit":!0,"model-name":"extra-service","model-id":r.id,field:"project_available",validate:!0},model:{value:r.is_project_available,callback:function(t){e.$set(r,"is_project_available",t)},expression:"item.is_project_available"}})],1),i("td",{staticClass:"toggle-adjust"},[i("toggle-service",{attrs:{"is-edit":!0,"model-name":"extra-service","model-id":r.id,field:"service_available",validate:!0},model:{value:r.is_service_available,callback:function(t){e.$set(r,"is_service_available",t)},expression:"item.is_service_available"}})],1),i("td",[i("v-icon",{staticClass:"edit",attrs:{small:"",title:e.$t("label.edit")},on:{click:function(t){return e.handleEdit(r,s)}}},[e._v("mdi-pencil")]),i("v-icon",{staticClass:"delete",attrs:{title:e.$t("label.delete"),small:""},on:{click:function(t){return e.handleDelete(r,s)}}},[e._v("mdi-delete")])],1)])]}}])}),i("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.showExtraServiceDialog,callback:function(t){e.showExtraServiceDialog=t},expression:"showExtraServiceDialog"}},[i("v-card",[i("v-card-title",[e._v(e._s(e.editMode?this.$t("label.edit_extra_service"):this.$t("label.create_extra_service")))]),i("v-divider"),i("v-card-text",{staticClass:"py-3"},[e.editMode?i("v-row",{attrs:{justify:"center"}},[i("v-col",{attrs:{cols:"6"}},[i("locale-select",{on:{change:e.fireLocaleChange}})],1)],1):e._e(),e.showExtraServiceDialog?i("v-form",[i("form-wrapper",{attrs:{validator:e.$v.extraService}},[i("v-row",[i("v-col",{attrs:{md:"6",cols:"12"}},[i("form-group",{attrs:{name:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.attrs;return[i("v-text-field",e._b({attrs:{label:e.$t("label.name"),outlined:""},on:{blur:function(t){return e.$v.extraService.name.$touch()}},model:{value:e.extraService.name,callback:function(t){e.$set(e.extraService,"name",t)},expression:"extraService.name"}},"v-text-field",a,!1))]}}],null,!1,3557083181)})],1),i("v-col",{attrs:{md:"6",cols:"12"}},[i("new-image-upload",{staticClass:"file-upload__image",attrs:{imgUrl:e.extraService.icon?e.extraService.icon.path:"",imgId:e.extraService.icon?e.extraService.icon.id:null},on:{fileSelected:e.handleUploadIcon}})],1)],1)],1)],1):e._e()],1),i("v-divider",{staticClass:"mx-4"}),i("v-card-actions",{staticClass:"py-4 mx-2"},[i("v-spacer"),i("v-btn",{attrs:{color:"secondary"},on:{click:e.closeExtraServiceDialog}},[e._v(e._s(this.$t("button.cancel")))]),i("v-btn",{attrs:{color:"primary",loading:e.loading.save,disabled:e.$v.$invalid||!e.extraService.icon},on:{click:e.save}},[e._v(e._s(this.$t("button.save")))])],1)],1)],1),i("global-image-preview",{attrs:{showDialog:e.imageOverlay,imagePath:e.currentPreviewImage},on:{closePreview:function(t){e.imageOverlay=!1}}})],1)},r=[],s=a("297e"),l=a("b5ae"),c=a("2cc4"),o=a("a78e"),n=a.n(o),d={name:"extra_services",data(){return{headers:[],extraServices:[],tableLoading:!0,extraService:{name:"",icon:null},currentExtraServiceId:null,currentExtraServiceIndex:null,editMode:!1,showExtraServiceDialog:!1,locale:n.a.get("language"),loading:{save:!1,media:!1,main:!1},imageOverlay:!1,currentPreviewImage:""}},mounted(){this.createTableHeaders(),this.getExtraServices()},methods:{createTableHeaders(){const e=["icon","name","project_available","service_available","actions"];this.headers=Object(s["a"])(e)},getExtraServices(){Object(c["b"])({reqName:"extra-services"}).then(e=>{const{data:t}=e.data;this.extraServices=t}).catch(e=>{console.log(e)}).finally(()=>{this.tableLoading=!1})},handleUploadIcon(e){this.extraService.icon=e.file},showImagePreview(e){e&&(this.currentPreviewImage=e.path,this.imageOverlay=!0)},handleEdit({id:e},t){this.currentExtraServiceId=e,this.currentExtraServiceIndex=t,this.editMode=!0,this.showExtraServiceDialog=!0,this.getExtraServiceData()},fireLocaleChange(e){this.locale=e,this.getExtraServiceData()},getExtraServiceData(){Object(c["c"])({reqName:"extra-services",id:this.currentExtraServiceId,locale:this.locale}).then(e=>{const{extra_service:t}=e.data;Object.keys(this.extraService).forEach(e=>{this.extraService[e]=t[e]})}).catch(e=>{console.log(e)})},save(){this.loading.save=!0,this.editMode?this.UpdateExtraService():this.StoreExtraService()},StoreExtraService(){let e=new FormData;Object.keys(this.extraService).forEach(t=>{e.append(t,this.extraService[t])}),Object(c["d"])({reqName:"extra-services",data:e}).then(e=>{this.loading.save=!1,this.extraServices.push(e.data.extra_service),this.closeExtraServiceDialog()}).catch(e=>{console.log(e),this.loading.save=!1})},UpdateExtraService(){let e=new FormData;Object.keys(this.extraService).forEach(t=>{"icon"!=t&&e.append(t,this.extraService[t])}),e.append("_method","PUT"),e.append("locale",this.locale),this.loading.main=!0,Object(c["e"])({reqName:"extra-services",id:this.currentExtraServiceId,data:e}).then(e=>{this.extraServices.splice(this.currentExtraServiceIndex,1,e.data.extra_service),this.loading.media||(this.loading.save=!1,this.getExtraServices(),this.closeExtraServiceDialog()),this.loading.main=!1}).catch(e=>{console.log(e),this.loading.save=!1})},handleDelete({id:e},t){this.popUp().then(a=>{a.dismiss||Object(c["a"])({reqName:"extra-services",id:e}).then(()=>{this.extraServices.splice(t,1)}).catch(e=>console.log(e))})},closeExtraServiceDialog(){this.showExtraServiceDialog=!1,this.resetExtraService()},resetExtraService(){this.$v.$reset(),this.extraService={name:"",icon:null},this.locale=n.a.get("language"),this.currentExtraServiceId=null,this.currentExtraServiceIndex=null,this.editMode=!1}},validations(){return{extraService:{name:{required:l["required"],minLength:Object(l["minLength"])(3),maxLength:Object(l["maxLength"])(30)}}}}},v=d,h=a("2877"),u=a("6544"),x=a.n(u),g=a("8212"),m=a("8336"),p=a("b0af"),b=a("99d9"),S=a("62ad"),_=a("8fea"),f=a("169a"),E=a("ce7e"),w=a("4bd4"),$=a("132d"),V=a("0fd9"),j=a("2fa4"),D=a("8654"),y=Object(h["a"])(v,i,r,!1,null,null,null);t["default"]=y.exports;x()(y,{VAvatar:g["a"],VBtn:m["a"],VCard:p["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:S["a"],VDataTable:_["a"],VDialog:f["a"],VDivider:E["a"],VForm:w["a"],VIcon:$["a"],VRow:V["a"],VSpacer:j["a"],VTextField:D["a"]})},"9ace":function(e,t,a){e.exports=a.p+"img/user.24d66af2.png"}}]);
//# sourceMappingURL=chunk-ab0edddc.7f85514e.js.map