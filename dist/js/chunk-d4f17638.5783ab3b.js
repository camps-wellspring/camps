(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d4f17638"],{"4bd4":function(e,t,i){"use strict";var a=i("58df"),s=i("7e2b"),r=i("3206");t["a"]=Object(a["a"])(s["a"],Object(r["b"])("form")).extend({name:"v-form",inheritAttrs:!1,props:{lazyValidation:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>{return e.$watch("hasError",t=>{this.$set(this.errorBag,e._uid,t)},{immediate:!0})},i={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?i.shouldValidate=e.$watch("shouldValidate",a=>{a&&(this.errorBag.hasOwnProperty(e._uid)||(i.valid=t(e)))}):i.valid=t(e),i},validate(){return 0===this.inputs.filter(e=>!e.validate(!0)).length},reset(){this.inputs.forEach(e=>e.reset()),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout(()=>{this.errorBag={}},0)},resetValidation(){this.inputs.forEach(e=>e.resetValidation()),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find(t=>t._uid===e._uid);if(!t)return;const i=this.watchers.find(e=>e._uid===t._uid);i&&(i.valid(),i.shouldValidate()),this.watchers=this.watchers.filter(e=>e._uid!==t._uid),this.inputs=this.inputs.filter(e=>e._uid!==t._uid),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},"83ed":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("main",[a("global-toolbar",{attrs:{title:"sub_services",actionButton:!0},on:{ButtonClicked:function(t){e.showSubServiceDialog=!0}}}),a("v-data-table",{attrs:{headers:e.headers,items:e.subServices,"hide-default-footer":"",loading:e.tableLoading},scopedSlots:e._u([{key:"item",fn:function(t){var s=t.item,r=t.index;return[a("tr",[a("td",[a("v-avatar",{attrs:{size:"40",color:"grey"}},[s.icon?a("img",{staticClass:"hover-pointer",attrs:{src:s.icon.path,title:e.$t("label.preview"),alt:e.$t("label.sub_service_icon")},on:{click:function(t){return e.showImagePreview(s.icon)}}}):a("img",{attrs:{src:i("9ace"),title:e.$t("label.no_photo"),alt:e.$t("label.sub_service_icon")}})])],1),a("td",[e._v(e._s(s.name))]),a("td",{attrs:{title:s.short_description}},[a("read-more",{staticClass:"read-more",attrs:{text:s.short_description,"max-chars":20,"less-str":"read less"}})],1),a("td",{staticClass:"toggle-adjust"},[a("toggle-service",{attrs:{"is-edit":!0,"model-name":"sub_service","model-id":s.id,field:"visible",validate:!0},model:{value:s.visible,callback:function(t){e.$set(s,"visible",t)},expression:"item.visible"}})],1),a("td",[a("v-icon",{staticClass:"edit",attrs:{small:"",title:e.$t("label.edit")},on:{click:function(t){return e.handleEdit(s,r)}}},[e._v("mdi-pencil")]),a("v-icon",{staticClass:"delete",attrs:{title:e.$t("label.delete"),small:""},on:{click:function(t){return e.handleDelete(s,r)}}},[e._v("mdi-delete")])],1)])]}}])}),a("div",{staticClass:"text-xs-center pt-2"},[e.subServices.length>0&&e.pagination.last_page>1?a("v-pagination",{attrs:{length:e.pagination.last_page,"total-visible":10},on:{input:e.handlePagination},model:{value:e.pagination.current_page,callback:function(t){e.$set(e.pagination,"current_page",t)},expression:"pagination.current_page"}}):e._e()],1),a("v-dialog",{attrs:{"max-width":"700px"},model:{value:e.showSubServiceDialog,callback:function(t){e.showSubServiceDialog=t},expression:"showSubServiceDialog"}},[a("v-card",[a("v-card-title",[e._v(e._s(e.editMode?this.$t("label.edit_sub_service"):this.$t("label.create_sub_service")))]),a("v-divider"),a("v-card-text",{staticClass:"py-3"},[e.editMode?a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"6"}},[a("locale-select",{on:{change:e.fireLocaleChange}})],1)],1):e._e(),e.showSubServiceDialog?a("v-form",[a("form-wrapper",{attrs:{validator:e.$v.subService}},[a("v-row",[a("v-col",{attrs:{md:"6",cols:"12"}},[a("form-group",{attrs:{name:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.attrs;return[a("v-text-field",e._b({attrs:{label:e.$t("label.name"),outlined:""},on:{blur:function(t){return e.$v.subService.name.$touch()}},model:{value:e.subService.name,callback:function(t){e.$set(e.subService,"name",t)},expression:"subService.name"}},"v-text-field",i,!1))]}}],null,!1,1319888749)})],1),a("v-col",{attrs:{md:"6",cols:"12"}},[a("new-image-upload",{staticClass:"file-upload__image",attrs:{imgUrl:e.subService.icon?e.subService.icon.path:"",imgId:e.subService.icon?e.subService.icon.id:null},on:{fileSelected:e.handleUploadIcon}})],1),a("v-col",{attrs:{cols:"12"}},[a("form-group",{attrs:{name:"short_description"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.attrs;return[a("v-textarea",e._b({attrs:{label:e.$t("label.short_description"),rows:5,outlined:""},on:{blur:function(t){return e.$v.subService.short_description.$touch()}},model:{value:e.subService.short_description,callback:function(t){e.$set(e.subService,"short_description",t)},expression:"subService.short_description"}},"v-textarea",i,!1))]}}],null,!1,801230107)})],1)],1)],1)],1):e._e()],1),a("v-divider",{staticClass:"mx-4"}),a("v-card-actions",{staticClass:"py-4 mx-2"},[a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:e.closeSubServiceDialog}},[e._v(e._s(this.$t("button.cancel")))]),a("v-btn",{attrs:{color:"primary",loading:e.loading.save,disabled:e.$v.$invalid||!e.subService.icon},on:{click:e.save}},[e._v(e._s(this.$t("button.save")))])],1)],1)],1),a("global-image-preview",{attrs:{showDialog:e.imageOverlay,imagePath:e.currentPreviewImage},on:{closePreview:function(t){e.imageOverlay=!1}}})],1)},s=[],r=i("297e"),c=i("b5ae"),n=i("2cc4"),o=i("a78e"),l=i.n(o),u={name:"sub_services",data(){return{headers:[],serviceId:this.$route.params.id,subServices:[],tableLoading:!0,subService:{service_id:this.$route.params.id,name:"",icon:null,short_description:""},currentSubServiceSlug:null,currentSubServiceIndex:null,editMode:!1,showSubServiceDialog:!1,locale:l.a.get("language"),loading:{save:!1,media:!1,main:!1},imageOverlay:!1,currentPreviewImage:""}},mounted(){this.createTableHeaders()},watch:{$route:{handler(e){this.queries={...e.query},this.getSubServices()},immediate:!0}},methods:{createTableHeaders(){const e=["icon","name","description","visibility","actions"];this.headers=Object(r["a"])(e)},getSubServices(){Object(n["b"])({reqName:`sub-services?service_id=${this.serviceId}`}).then(e=>{const{data:t,meta:i}=e.data;this.subServices=t,this.pagination=i}).catch(e=>{console.log(e)}).finally(()=>{this.tableLoading=!1})},handleUploadIcon(e){this.subService.icon=e.file},showImagePreview(e){e&&(this.currentPreviewImage=e.path,this.imageOverlay=!0)},handleEdit({slug:e},t){this.currentSubServiceSlug=e,this.currentSubServiceIndex=t,this.editMode=!0,this.showSubServiceDialog=!0,this.getSubServiceData()},fireLocaleChange(e){this.locale=e,this.getSubServiceData()},getSubServiceData(){Object(n["c"])({reqName:"sub-services",id:this.currentSubServiceSlug,locale:this.locale}).then(e=>{const{sub_service:t}=e.data;Object.keys(this.subService).forEach(e=>{this.subService[e]=t[e]})}).catch(e=>{console.log(e)})},save(){this.loading.save=!0,this.editMode?this.UpdateSubService():this.StoreSubService()},StoreSubService(){let e=new FormData;Object.keys(this.subService).forEach(t=>{e.append(t,this.subService[t])}),Object(n["d"])({reqName:"sub-services",data:e}).then(e=>{this.loading.save=!1,this.subServices.push(e.data.sub_service),this.closeSubServiceDialog()}).catch(e=>{console.log(e),this.loading.save=!1})},UpdateSubService(){let e=new FormData;Object.keys(this.subService).forEach(t=>{"icon"!=t&&e.append(t,this.subService[t])}),e.append("_method","PUT"),e.append("locale",this.locale),this.loading.main=!0,Object(n["e"])({reqName:"sub-services",id:this.currentSubServiceSlug,data:e}).then(e=>{this.subServices.splice(this.currentSubServiceIndex,1,e.data.sub_service),this.loading.media||(this.loading.save=!1,this.getSubServices(),this.closeSubServiceDialog()),this.loading.main=!1}).catch(e=>{console.log(e),this.loading.save=!1})},handleDelete({slug:e},t){this.popUp().then(i=>{i.dismiss||Object(n["a"])({reqName:"sub-services",id:e}).then(()=>{this.subServices.splice(t,1)}).catch(e=>console.log(e))})},closeSubServiceDialog(){this.showSubServiceDialog=!1,this.resetSubService()},resetSubService(){this.$v.$reset(),this.subService={service_id:this.$route.params.id,name:"",icon:null,short_description:""},this.locale=l.a.get("language"),this.currentSubServiceSlug=null,this.currentSubServiceIndex=null,this.editMode=!1},handlePagination(e){this.queries.page=e,this.$router.push({query:this.queries})}},validations(){return{subService:{name:{required:c["required"],minLength:Object(c["minLength"])(3),maxLength:Object(c["maxLength"])(20)},short_description:{required:c["required"],minLength:Object(c["minLength"])(3)}}}}},d=u,h=i("2877"),v=i("6544"),b=i.n(v),g=i("8212"),S=i("8336"),m=i("b0af"),p=i("99d9"),_=i("62ad"),f=i("8fea"),w=i("169a"),$=i("ce7e"),x=i("4bd4"),V=i("132d"),y=i("891e"),D=i("0fd9"),O=i("2fa4"),k=i("8654"),C=i("a844"),j=Object(h["a"])(d,a,s,!1,null,null,null);t["default"]=j.exports;b()(j,{VAvatar:g["a"],VBtn:S["a"],VCard:m["a"],VCardActions:p["a"],VCardText:p["b"],VCardTitle:p["c"],VCol:_["a"],VDataTable:f["a"],VDialog:w["a"],VDivider:$["a"],VForm:x["a"],VIcon:V["a"],VPagination:y["a"],VRow:D["a"],VSpacer:O["a"],VTextField:k["a"],VTextarea:C["a"]})},"9ace":function(e,t,i){e.exports=i.p+"img/user.24d66af2.png"}}]);
//# sourceMappingURL=chunk-d4f17638.5783ab3b.js.map